<!doctype html>
<html lang="en">

	<head>
		<meta charset="utf-8">

		<title> MIT App Inventor: A Look Under the Hood</title>

		<meta name="description" content="A framework for easily creating beautiful presentations using HTML">
		<meta name="author" content="Hakim El Hattab">

		<meta name="apple-mobile-web-app-capable" content="yes" />
		<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<link rel="stylesheet" href="css/reveal.min.css">
		<link rel="stylesheet" href="css/theme/default.css" id="theme">

		<!-- For syntax highlighting -->
		<link rel="stylesheet" href="lib/css/zenburn.css">

		<!-- If the query includes 'print-pdf', use the PDF print sheet -->
		<script>
			document.write( '<link rel="stylesheet" href="css/print/' + ( window.location.search.match( /print-pdf/gi ) ? 'pdf' : 'paper' ) + '.css" type="text/css" media="print">' );
		</script>

		<!--[if lt IE 9]>
		<script src="lib/js/html5shiv.js"></script>
		<![endif]-->
	</head>
	<body>
		<div class="reveal">

			<!-- Any section element inside of this container is displayed as a slide -->
			<div class="slides">
                          <!-- Begin Slides -->
                          <section>
                            <h2> MIT App Inventor:<br/> A Look Under the Hood</h2>
                            <p>
                              Jeffrey I. Schiller<br/>
                              MIT App Inventor<br/>
                              Developer, Guru, Fixer of Broken Things<br/>
                              Code Monkey<br/>
                            </p>
                          </section>
                          <section>
                            <h2> MIT App Inventor is Large</h2>
                            <ul>
                              <li>And Growing&hellip;
                              </li>
                              <li>Some Numbers
                                <ul>
                                  <li>2.8 Million Unique Users
                                  </li>
                                  <li>50,000 Daily Users
                                  </li>
                                  <li>350,000 Monthly Users
                                  </li>
                                  <li>10 Million Projects
                                  </li>
                                  <li>8 Terra Bytes of Storage
                                  </li>
                                </ul>
                              </li>
                            </ul>
                          </section>
                          <section>
                            <h2> The Pieces</h2>
                            <ul>
                              <li>The App Inventor Server
                                <ul>
                                  <li>Deployed in Google’s “App Engine”
                                    Scales as needed
                                  </li>
                                  <li>Serves up the App Inventor code
                                  </li>
                                  <li>Stores people’s projects
                                  </li>
                                </ul>
                              </li>
                              <li>The Build Server
                                <ul>
                                  <li>Handles the packaging of Finished Apps
                                  </li>
                                  <li>Cannot run in App Engine due to limitations of App Engine
                                  </li>
                                  <li>We currently deploy 72 CPU Codes across 9 Servers
                                  </li>
                                </ul>
                              </li>
                              <li>Your Device –
                                Your favorite Android Device (or emulator)
                              </li>
                              <li>Your Computer
                              </li>
                              <li>The Rendezvous Server
                              </li>
                            </ul>
                          </section>
                          <section>
                            <h2> Login Flow</h2>
                            <p>
                              <img src="./drawing1.png"  alt="./drawing1.png" />
                            </p>
                          </section>
                          <section>
                            <h2> Login Flow</h2>
                            <ul>
                              <li>Your Computer Contacts App Engine (ai2.appinventor.mit.edu)
                              </li>
                              <li>Google determines if you are logged in and puts up the Login page
                                if not
                              </li>
                              <li>The App Inventor Client loads into your browser
                                <ul>
                                  <li>App Inventor is really a full blown application that does most of
                                    its work in your browser!
                                  </li>
                                  <li>The Server is just used to download the client and to store
                                    projects
                                  </li>
                                </ul>
                              </li>
                              <li>The list of projects you own is loaded into your browser
                              </li>
                              <li>Your most recent project is then loaded and opened
                              </li>
                              <li>You work!
                              </li>
                            </ul>
                          </section>
                          <section>
                            <h2> Incremental Development</h2>
                            <ul>
                              <li>Three ways to do incremental development
                                <ul>
                                  <li>A Phone/Tablet via a WiFi network
                                  </li>
                                  <li>A Phone/Tablet connected via the USB Cable
                                  </li>
                                  <li>An emulator running on your computer
                                  </li>
                                </ul>
                              </li>
                              <li>What we support
                                <ul>
                                  <li>We support devices to Android 1.6 (Donut)
                                    <ul>
                                      <li>But we recommend at least Gingerbread (2.3)
                                      </li>
                                      <li>Newer features require newer devices
                                      </li>
                                    </ul>
                                  </li>
                                  <li>The Emulator is currently emulating 2.2 (Froyo)
                                    <ul>
                                      <li>We would like to use a newer version, but they load
                                        even slower (!!)
                                      </li>
                                    </ul>
                                  </li>
                                </ul>
                              </li>
                              <li>Using a Real device (Phone/Tablet) works best
                              </li>
                            </ul>
                          </section>
                          <section>
                            <h2> Incremental Development – Connecting</h2>
                            <ul>
                              <li>WiFi Connection
                                <ul>
                                  <li>The trick is finding the right device!
                                  </li>
                                  <li>When your phone is on WiFi it has an Internet Address (IP)
                                  </li>
                                  <li>Your computer needs to learn the phone’s IP Address
                                  </li>
                                  <li>This is done with the Rendezvous Server
                                  </li>
                                  <li>When you “Connect-&gt;AI Companion” your computer generates a six
                                    character code which is displayed to you along with an equivalent
                                    QR Code
                                  </li>
                                  <li>When you scan the code (or enter the code) in your phone it is
                                    sent to the Rendezvous Server along with the phone’s IP Address
                                  </li>
                                  <li>The Computer polls once per second to find the IP Address
                                  </li>
                                  <li>Once the Computer learns the IP address of the phone, it talks
                                    directly to the phone
                                    <ul>
                                      <li>The phone is actually running a small webserver
                                      </li>
                                    </ul>
                                  </li>
                                </ul>
                              </li>
                            </ul>
                          </section>
                          <section>
                            <h2> Incremental Development – Connecting</h2>
                            <p>
                              <img src="./drawing2.png"  alt="./drawing2.png" />
                            </p>
                          </section>
                          <section>
                            <h2> Trouble Shooting</h2>
                            <ul>
                              <li>There are three ways things can go wrong
                                <ul>
                                  <li>The phone cannot reach the Rendezvous Server
                                  </li>
                                  <li>The computer cannot reach the Rendezvous Server
                                  </li>
                                  <li>The computer cannot reach the phone
                                  </li>
                                </ul>
                              </li>
                              <li>If the QR Code does not dismiss (go away)
                                <ul>
                                  <li>Try going to <a href="http://rendezvous.appinventor.mit.edu/rendezvous/test">http://rendezvous.appinventor.mit.edu/rendezvous/test</a>
                                    <ul>
                                      <li>Both from the phone and computer
                                      </li>
                                    </ul>
                                  </li>
                                </ul>
                              </li>
                              <li>If the QR Code does dismiss
                                <ul>
                                  <li>Then the computer cannot reach the phone
                                  </li>
                                  <li>Make sure port 8001 isn’t blocked
                                    <ul>
                                      <li>Often firewall software on the computer can block this port
                                      </li>
                                      <li>Often WiFi networks are configured to block connections to
                                        devices
                                      </li>
                                    </ul>
                                  </li>
                                </ul>
                              </li>
                            </ul>
                          </section>
                          <section>
                            <h2> Packaging Apps</h2>
                            <ul>
                              <li>This is the job of the Buildserver
                              </li>
                              <li>Too much computation for App Engine
                              </li>
                              <li>We have 9 buildservers each with 8 cores behind a load balancer
                              </li>
                            </ul>
                          </section>
                          <section>
                            <h2> Packaging Apps</h2>
                            <p>
                              <img src="./drawing3.png"  alt="./drawing3.png" />
                            </p>
                          </section>
                          <section>
                            <h2> The Magic behind Incremental Development</h2>
                            <ul>
                              <li>Blocks get compiled to “Scheme” code
                                <ul>
                                  <li>Scheme is a Lisp like language
                                  </li>
                                  <li>(+ 3 4)
                                  </li>
                                  <li>(define (fact x)
                                    (if (= x 0) 1
                                    (* x (fact (- x 1)))))
                                  </li>
                                </ul>
                              </li>
                              <li>When you define an event handler
                                <ul>
                                  <li>For example: Button1.Click
                                    <ul>
                                      <li>It defines a Scheme function which performs the blocks
                                      </li>
                                    </ul>
                                  </li>
                                  <li>The scheme definition is sent to the phone
                                  </li>
                                </ul>
                              </li>
                              <li>The Magic is that when you update the blocks, you update the
                                definition of the function which is sent to the phone and replaces
                                the previous definition. Result: New behavior in real-time
                              </li>
                            </ul>
                          </section>
                          <section>
                            <h2> Packaging Apps</h2>
                            <ul>
                              <li>Compile the blocks to Scheme
                              </li>
                              <li>Compile the Scheme to Java Byte-Code
                              </li>
                              <li>“Dex” it to Dalvik/ART Code
                              </li>
                              <li>Apps run at native Android speed
                              </li>
                            </ul>
                          </section>
                          <section>
                            <h2> Recent Changes to the System</h2>
                            <ul>
                              <li>Firebase Component
                                <ul>
                                  <li>Behaves like TinyWebDB
                                  </li>
                                  <li>But fires and event when a “tag” is changed
                                    by another instance of the application
                                  </li>
                                  <li>Can be used to hold high scores from games
                                  </li>
                                  <li>We built a simple chat app based on it
                                  </li>
                                  <li>Lots of possibilities
                                  </li>
                                  <li>Much easier to use then Fusion Tables!
                                  </li>
                                </ul>
                              </li>
                            </ul>
                          </section>
                          <section>
                            <h2> Upcoming Changes</h2>
                            <ul>
                              <li>Today Components are all builtin
                                <ul>
                                  <li>Additional functionality requiring Java has to be built into a
                                    custom version of App Inventor
                                    <ul>
                                      <li>Painful&hellip;
                                      </li>
                                    </ul>
                                  </li>
                                </ul>
                              </li>
                              <li>Extensions – Ability to write components in Java
                                <ul>
                                  <li>These can then be loaded into a project on our public system
                                    <ul>
                                      <li>Incremental Development will work with external components
                                      </li>
                                      <li>Packaged Apps work as well
                                      </li>
                                    </ul>
                                  </li>
                                </ul>
                              </li>
                            </ul>
                          </section>
                          <section>
                            <h2> More on Extensions</h2>
                            <ul>
                              <li>Currently a bit difficult to build
                              </li>
                              <li>Much easier to use – Just add the component “.aix” file to your
                                project
                              </li>
                              <li>Extensions are still experimental
                                <ul>
                                  <li>Upgrading external components is still a work in progress
                                  </li>
                                  <li>External components might break and need to be re-compiled
                                  </li>
                                </ul>
                              </li>
                              <li>But lots of possibilities
                                <ul>
                                  <li>Right now, if you need something special, you wind up
                                    rebuilding your App without App Inventor
                                  </li>
                                  <li>With extensions you can add the needed features and continue to
                                    use App Inventor for most of your app
                                  </li>
                                </ul>
                              </li>
                            </ul>
                          </section>
                          <section>
                            <h2> Questions</h2>
                          </section>
                          <!-- End Slides -->
			</div>

		</div>

		<script src="lib/js/head.min.js"></script>
		<script src="js/reveal.min.js"></script>

		<script>

			// Full list of configuration options available here:
			// https://github.com/hakimel/reveal.js#configuration
			Reveal.initialize({
				controls: true,
				progress: true,
				history: true,
				center: true,

				theme: Reveal.getQueryHash().theme, // available themes are in /css/theme
				transition: Reveal.getQueryHash().transition || 'default', // default/cube/page/concave/zoom/linear/fade/none

				// Optional libraries used to extend on reveal.js
				dependencies: [
					{ src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
					{ src: 'plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
					{ src: 'plugin/zoom-js/zoom.js', async: true, condition: function() { return !!document.body.classList; } },
					{ src: 'plugin/notes/notes.js', async: true, condition: function() { return !!document.body.classList; } }
					// { src: 'plugin/search/search.js', async: true, condition: function() { return !!document.body.classList; } }
					// { src: 'plugin/remotes/remotes.js', async: true, condition: function() { return !!document.body.classList; } }
				]
			});

		</script>

	</body>
</html>
