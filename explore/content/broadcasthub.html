<!DOCTYPE html>
<!--[if IEMobile 7]><html class="iem7" lang="en" dir="ltr"><![endif]-->
<!--[if (lte IE 6)&(!IEMobile)]><html class="ie6 ie6-7 ie6-8" lang="en" dir="ltr"><![endif]-->
<!--[if (IE 7)&(!IEMobile)]><html class="ie7 ie6-7 ie6-8" lang="en" dir="ltr"><![endif]-->
<!--[if (IE 8)&(!IEMobile)]><html class="ie8 ie6-8" lang="en" dir="ltr"><![endif]-->
<!--[if (gte IE 9)|(gt IEMobile 7)]><!--><html lang="en" dir="ltr"
  xmlns:content="http://purl.org/rss/1.0/modules/content/"
  xmlns:dc="http://purl.org/dc/terms/"
  xmlns:foaf="http://xmlns.com/foaf/0.1/"
  xmlns:og="http://ogp.me/ns#"
  xmlns:rdfs="http://www.w3.org/2000/01/rdf-schema#"
  xmlns:sioc="http://rdfs.org/sioc/ns#"
  xmlns:sioct="http://rdfs.org/sioc/types#"
  xmlns:skos="http://www.w3.org/2004/02/skos/core#"
  xmlns:xsd="http://www.w3.org/2001/XMLSchema#"><!--<![endif]-->

<!-- Mirrored from explore.appinventor.mit.edu/content/broadcasthub by HTTrack Website Copier/3.x [XR&CO'2010], Fri, 14 Sep 2012 00:26:04 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8"><!-- /Added by HTTrack -->
<head>
<meta charset="utf-8" />
<meta about="/content/broadcasthub" property="sioc:num_replies" content="0" datatype="xsd:integer" />
<link rel="shortcut icon" href="../sites/explore.appinventor.mit.edu/files/MIT_App_Inventor_favicon_0.png" type="image/png" />
<meta content="BroadcastHub" about="/content/broadcasthub" property="dc:title" />
<link rel="shortlink" href="../node/104.html" />
<meta name="Generator" content="Drupal 7 (http://drupal.org)" />
<link rel="canonical" href="broadcasthub.html" />
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="MobileOptimized" content="width">
<meta name="HandheldFriendly" content="true">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta http-equiv="cleartype" content="on">
<meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
<title>BroadcastHub | Explore MIT App Inventor</title>
<style>@import url("../modules/system/system.base1bbe.css?ma9p16");
@import url("../modules/system/system.menus1bbe.css?ma9p16");
@import url("../modules/system/system.messages1bbe.css?ma9p16");
@import url("../modules/system/system.theme1bbe.css?ma9p16");</style>
<style>@import url("../modules/comment/comment1bbe.css?ma9p16");
@import url("../modules/field/theme/field1bbe.css?ma9p16");
@import url("../modules/node/node1bbe.css?ma9p16");
@import url("../modules/search/search1bbe.css?ma9p16");
@import url("../modules/user/user1bbe.css?ma9p16");
@import url("../sites/all/modules/views/css/views1bbe.css?ma9p16");</style>
<style>@import url("../sites/all/modules/ctools/css/ctools1bbe.css?ma9p16");
@import url("../sites/all/modules/panels/css/panels1bbe.css?ma9p16");
@import url("../sites/all/modules/extlink/extlink1bbe.css?ma9p16");</style>
<style>@import url("../sites/all/themes/adaptivetheme/adaptivetheme/css/at.base1bbe.css?ma9p16");
@import url("../sites/all/themes/adaptivetheme/adaptivetheme/css/at.layout1bbe.css?ma9p16");
@import url("../sites/all/themes/adaptivetheme/adaptivetheme/css/at.messages1bbe.css?ma9p16");
@import url("../sites/all/themes/sky/css/html-elements1bbe.css?ma9p16");
@import url("../sites/all/themes/sky/css/forms1bbe.css?ma9p16");
@import url("../sites/all/themes/sky/css/tables1bbe.css?ma9p16");
@import url("../sites/all/themes/sky/css/page1bbe.css?ma9p16");
@import url("../sites/all/themes/sky/css/articles1bbe.css?ma9p16");
@import url("../sites/all/themes/sky/css/comments1bbe.css?ma9p16");
@import url("../sites/all/themes/sky/css/fields1bbe.css?ma9p16");
@import url("../sites/all/themes/sky/css/blocks1bbe.css?ma9p16");
@import url("../sites/all/themes/sky/css/navigation1bbe.css?ma9p16");
@import url("../sites/explore.appinventor.mit.edu/files/color/modtheme-bdf3989c/colors1bbe.css?ma9p16");
@import url("../sites/all/themes/sky/css/sky.settings.style1bbe.css?ma9p16");
@import url("../sites/all/themes/modtheme/css/modtheme1bbe.css?ma9p16");</style>
<style media="print">@import url("../sites/all/themes/sky/css/print1bbe.css?ma9p16");</style>
<link type="text/css" rel="stylesheet" href="../sites/all/themes/sky/css/sky.responsive.style1bbe.css?ma9p16" media="all" />
<link type="text/css" rel="stylesheet" href="../sites/all/themes/sky/css/sky.responsive.gpanels1bbe.css?ma9p16" media="all" />
<link type="text/css" rel="stylesheet" href="../sites/all/themes/modtheme/css/modtheme.responsive.style1bbe.css?ma9p16" media="all" />
<link type="text/css" rel="stylesheet" href="../sites/all/themes/modtheme/css/modtheme.responsive.gpanels1bbe.css?ma9p16" media="all" />
<link type="text/css" rel="stylesheet" href="../sites/explore.appinventor.mit.edu/files/at_css/modtheme.responsive.layout1bbe.css?ma9p16" media="all" />

<!--[if lt IE 9]>
<link type="text/css" rel="stylesheet" href="http://explore.appinventor.mit.edu/sites/explore.appinventor.mit.edu/files/at_css/modtheme.lt-ie9.layout.css?ma9p16" media="all" />
<![endif]-->
<script src="../misc/jquery1cc4.js?v=1.4.4"></script>
<script src="../misc/jquery.once7839.js?v=1.2"></script>
<script src="../misc/drupal1bbe.js?ma9p16"></script>
<script src="../sites/all/modules/admin_menu/admin_devel/admin_devel1bbe.js?ma9p16"></script>
<script src="../sites/all/modules/panels/js/panels1bbe.js?ma9p16"></script>
<script src="../sites/all/modules/extlink/extlink1bbe.js?ma9p16"></script>
<script src="../sites/all/modules/google_analytics/googleanalytics1bbe.js?ma9p16"></script>
<script>var _gaq = _gaq || [];_gaq.push(["_setAccount", "UA-31803258-1"]);_gaq.push(["_trackPageview"]);(function() {var ga = document.createElement("script");ga.type = "text/javascript";ga.async = true;ga.src = ("https:" == document.location.protocol ? "https://ssl" : "http://www") + ".google-analytics.com/ga.js";var s = document.getElementsByTagName("script")[0];s.parentNode.insertBefore(ga, s);})();</script>
<script src="../sites/all/themes/sky/js/scripts1bbe.js?ma9p16"></script>
<script>jQuery.extend(Drupal.settings, {"basePath":"\/","pathPrefix":"","ajaxPageState":{"theme":"modtheme","theme_token":"yTUgEfntc_2IqhvZKLZxMH3es_jLhDVbpXO2KeUffyM","js":{"misc\/jquery.js":1,"misc\/jquery.once.js":1,"misc\/drupal.js":1,"sites\/all\/modules\/admin_menu\/admin_devel\/admin_devel.js":1,"sites\/all\/modules\/panels\/js\/panels.js":1,"sites\/all\/modules\/extlink\/extlink.js":1,"sites\/all\/modules\/google_analytics\/googleanalytics.js":1,"0":1,"sites\/all\/themes\/sky\/js\/scripts.js":1},"css":{"modules\/system\/system.base.css":1,"modules\/system\/system.menus.css":1,"modules\/system\/system.messages.css":1,"modules\/system\/system.theme.css":1,"modules\/comment\/comment.css":1,"modules\/field\/theme\/field.css":1,"modules\/node\/node.css":1,"modules\/search\/search.css":1,"modules\/user\/user.css":1,"sites\/all\/modules\/views\/css\/views.css":1,"sites\/all\/modules\/ctools\/css\/ctools.css":1,"sites\/all\/modules\/panels\/css\/panels.css":1,"sites\/all\/modules\/extlink\/extlink.css":1,"sites\/all\/themes\/adaptivetheme\/adaptivetheme\/css\/at.base.css":1,"sites\/all\/themes\/adaptivetheme\/adaptivetheme\/css\/at.layout.css":1,"sites\/all\/themes\/adaptivetheme\/adaptivetheme\/css\/at.messages.css":1,"sites\/all\/themes\/sky\/css\/html-elements.css":1,"sites\/all\/themes\/sky\/css\/forms.css":1,"sites\/all\/themes\/sky\/css\/tables.css":1,"sites\/all\/themes\/sky\/css\/page.css":1,"sites\/all\/themes\/sky\/css\/articles.css":1,"sites\/all\/themes\/sky\/css\/comments.css":1,"sites\/all\/themes\/sky\/css\/fields.css":1,"sites\/all\/themes\/sky\/css\/blocks.css":1,"sites\/all\/themes\/sky\/css\/navigation.css":1,"sites\/all\/themes\/modtheme\/color\/colors.css":1,"sites\/all\/themes\/sky\/css\/sky.settings.style.css":1,"sites\/all\/themes\/modtheme\/css\/modtheme.css":1,"sites\/all\/themes\/sky\/css\/print.css":1,"sites\/all\/themes\/sky\/css\/sky.responsive.style.css":1,"sites\/all\/themes\/sky\/css\/sky.responsive.gpanels.css":1,"sites\/all\/themes\/modtheme\/css\/modtheme.responsive.style.css":1,"sites\/all\/themes\/modtheme\/css\/modtheme.responsive.gpanels.css":1,"public:\/\/at_css\/modtheme.responsive.layout.css":1,"public:\/\/at_css\/modtheme.lt-ie9.layout.css":1}},"extlink":{"extTarget":"_blank","extClass":"ext","extSubdomains":1,"extExclude":"","extInclude":"","extAlert":0,"extAlertText":"This link will take you to an external web site. We are not responsible for their content.","mailtoClass":"mailto"},"googleanalytics":{"trackOutbound":1,"trackMailto":1,"trackDownload":1,"trackDownloadExtensions":"7z|aac|arc|arj|asf|asx|avi|bin|csv|doc|exe|flv|gif|gz|gzip|hqx|jar|jpe?g|js|mp(2|3|4|e?g)|mov(ie)?|msi|msp|pdf|phps|png|ppt|qtm?|ra(m|r)?|sea|sit|tar|tgz|torrent|txt|wav|wma|wmv|wpd|xls|xml|z|zip"}});</script>
<!--[if lt IE 9]>
<script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
<![endif]-->
</head>
<body class="html not-front not-logged-in one-sidebar sidebar-second page-node page-node- page-node-104 page-type-page site-name-explore-mit-app-inventor section-content site-name-hidden color-scheme-custom modtheme gecko win fs-small bs-n bb-n mb-dd rc-0 rct-8 ia-r bf-l snf-a ssf-a ptf-a ntf-a ctf-a btf-a">
  <div id="skip-link">
    <a href="#main-content" class="element-invisible element-focusable">Skip to main content</a>
  </div>
    <div id="page" class="container">

  
  <header class="clearfix" role="banner">
        <div id="cml_logo"><a href="http://mobilelearning.mit.edu/" title="CML Home Page"><img src="../sites/explore.appinventor.mit.edu/files/cml_logo.png" alt="MIT Center for Mobile Learning"></a>
        </div>

    <div id="branding">
              <hgroup class="element-invisible">
                      <h1 id="site-name" class="element-invisible"><a href="../index-2.html" title="Home page">Explore MIT App Inventor</a></h1>
                            </hgroup>
                    <div id="logo"><a href="../index-2.html" title="Home page"><img src="../sites/explore.appinventor.mit.edu/files/MIT_app_inventor_explore_logo_big_0_0.png" alt="Explore MIT App Inventor logo"/></a></div>
          </div>

          <div id="menu-bar" class="nav clearfix">
      <nav id="block-system-main-menu" class="block block-system block-menu block-odd block-count-1 block-region-menu-bar menu-wrapper clearfix">
              <h2 class="block-title element-invisible element-invisible">Main menu</h2>
            <ul class="menu clearfix"><li class="first collapsed menu-item-218"><a href="../index-2.html" title="Explore MIT App Inventor Home Page">Home</a></li><li class="leaf menu-item-686"><a href="../blog.html" title="Blog from the MIT App Inventor Team">Blog</a></li><li class="expanded active-trail menu-item-525"><a href="../learn.html" title="Learn about MIT App Inventor" class="active-trail">Learn</a><ul class="menu clearfix"><li class="first leaf menu-item-1015"><a href="accessing-images-and-sounds.html">Accessing images and sounds</a></li><li class="leaf menu-item-989"><a href="android-wheres-my-car.html">Android, Where&#039;s My Car</a></li><li class="leaf menu-item-948"><a href="animation.html" title="Animation">Animation</a></li><li class="leaf menu-item-1009"><a href="apps-google-play.html">Apps to Google Play</a></li><li class="leaf menu-item-951"><a href="basic.html" title="Basic Components">Basic</a></li><li class="leaf menu-item-1014"><a href="bluetooth.html">Bluetooth</a></li><li class="leaf active-trail menu-item-986"><a href="broadcasthub.html" class="active-trail active">BroadcastHub</a></li><li class="leaf menu-item-1022"><a href="color-blocks.html">Color Blocks</a></li><li class="leaf menu-item-992"><a href="colored-dots.html">Colored Dots</a></li><li class="leaf menu-item-1021"><a href="control-blocks.html">Control Blocks</a></li><li class="leaf menu-item-1010"><a href="custom-tinywebdb-service.html">Custom TinyWebDB Service</a></li><li class="leaf menu-item-1016"><a href="definition-blocks.html">Definition Blocks</a></li><li class="leaf menu-item-993"><a href="displaying-list.html">Displaying a List</a></li><li class="leaf menu-item-949"><a href="faq.html" title="Frequently Asked Questions">FAQ</a></li><li class="leaf menu-item-965"><a href="hellopurr-part-2.html" title="HelloPurr (Part 2)">HelloPurr (Part 2)</a></li><li class="leaf menu-item-963"><a href="hellopurr-phone-part-1.html" title="HelloPurr Part One (Phone)">HelloPurr Part One (Phone)</a></li><li class="leaf menu-item-964"><a href="hellopurr-emulator-part-1.html" title="HelloPurr with the Emulator (Part 1)">HelloPurr with the Emulator (Part 1)</a></li><li class="leaf menu-item-996"><a href="lego-mindstorms.html">LEGO® MINDSTORMS®</a></li><li class="leaf menu-item-955"><a href="linux.html" title="Linux Setup">Linux</a></li><li class="leaf menu-item-1018"><a href="list-blocks.html">List Blocks</a></li><li class="leaf menu-item-1011"><a href="live-development.html">Live Development</a></li><li class="leaf menu-item-1012"><a href="location-sensor.html">Location Sensor</a></li><li class="leaf menu-item-1020"><a href="logic-blocks.html">Logic Blocks</a></li><li class="leaf menu-item-954"><a href="mac.html" title="Mac Setup">Mac</a></li><li class="leaf menu-item-983"><a href="makequiz-and-takequiz.html">MakeQuiz and TakeQuiz</a></li><li class="leaf menu-item-984"><a href="maptour.html">Map Tour</a></li><li class="leaf menu-item-1019"><a href="math-blocks.html">Math Blocks</a></li><li class="leaf menu-item-950"><a href="media.html" title="Media Components">Media</a></li><li class="leaf menu-item-991"><a href="molemash-2.html">MoleMash 2</a></li><li class="leaf menu-item-969"><a href="molemash.html" title="MoleMash Tutorial">MoleMash</a></li><li class="leaf menu-item-987"><a href="no-text-while-driving.html">No Text While Driving</a></li><li class="leaf menu-item-988"><a href="no-text-while-driving-part-2.html">No Text While Driving, Part 2</a></li><li class="leaf menu-item-998"><a href="not-ready-prime-time.html">Not Ready for Prime Time</a></li><li class="leaf menu-item-997"><a href="other-components.html">Other Components</a></li><li class="leaf menu-item-967"><a href="paintpot-part-1.html" title="PaintPot (Part 1)">PaintPot (Part 1)</a></li><li class="leaf menu-item-968"><a href="paintpot-part-2.html" title="PaintPot (Part 2)">PaintPot (Part 2)</a></li><li class="leaf menu-item-979"><a href="piccall.html" title="PicCall Tutorial">PicCall</a></li><li class="leaf menu-item-1025"><a href="post-documentation.html">Post Documentation</a></li><li class="leaf menu-item-980"><a href="quizme.html" title="QuizMe Tutorial">QuizMe</a></li><li class="leaf menu-item-957"><a href="reference-documentation.html" title="Reference Documentation">Reference Documentation</a></li><li class="leaf menu-item-995"><a href="screen-arrangement.html">Screen Arrangement</a></li><li class="leaf menu-item-994"><a href="sensor.html">Sensor</a></li><li class="leaf menu-item-952"><a href="set-your-phone.html" title="Set Up Your Phone">Set Up Your Phone</a></li><li class="leaf menu-item-956"><a href="setup.html" title="Setup">Setup</a></li><li class="leaf menu-item-947"><a href="social.html">Social</a></li><li class="leaf menu-item-1013"><a href="specifying-sizes-components.html">Specifying sizes of components</a></li><li class="leaf menu-item-990"><a href="stockquotes.html">StockQuotes</a></li><li class="leaf menu-item-962"><a href="system-requirements.html" title="System Requirements">System Requirements</a></li><li class="leaf menu-item-1017"><a href="text-blocks.html">Text Blocks</a></li><li class="leaf menu-item-985"><a href="text-group-part-2.html">Text Group Part 2</a></li><li class="leaf menu-item-982"><a href="textgroup.html">TextGroup</a></li><li class="leaf menu-item-959"><a href="troubleshooting.html" title="Troubleshooting">Troubleshooting</a></li><li class="leaf menu-item-958"><a href="tutorials.html" title="Tutorials">Tutorials</a></li><li class="leaf menu-item-1008"><a href="using-activity-starter.html">Using the Activity Starter</a></li><li class="leaf menu-item-1023"><a href="videowall.html">VideoWall</a></li><li class="leaf menu-item-961"><a href="what-app-inventor.html" title="What is App Inventor?">What is App Inventor</a></li><li class="leaf menu-item-953"><a href="windows.html" title="Windows Setup">Windows</a></li><li class="last leaf menu-item-966"><a href="windows-drivers.html" title="Windows Drivers for Android Phones">Windows Drivers</a></li></ul></li><li class="leaf menu-item-432"><a href="http://beta.appinventor.mit.edu/forum/index.html" title="MIT App Inventor forums">Forum</a></li><li class="collapsed menu-item-438"><a href="../stories.html" title="Stories about Users&#039; Successes with MIT App Inventor">Stories</a></li><li class="last leaf menu-item-527"><a href="../invent.html" title="Find out how to start using App Inventor">Invent</a></li></ul>  </nav>
  </div>

  </header>

  <div id="columns"class="no-menu-bar"><div class="columns-inner clearfix">

            
          <section id="breadcrumb"><h2 class="element-invisible">You are here</h2><ol id="crumbs"><li class="crumb"><a href="../learn.html" title="Learn about MIT App Inventor" class="active-trail">Learn</a></li></ol></section>
    
    <div id="content-column"><div class="content-inner">

      
            <section id="main-content" role="main">

                        
        
        <div id="content">  <div class="region region-content">
    <div id="block-system-main" class="block block-system block-odd block-count-2 block-region-content">
  <div class="block-inner clearfix">
                <div class="block-content content no-title">
      <article id="article-104" class="article article-type-page odd article-full clearfix" about="/content/broadcasthub" typeof="foaf:Document" role="article">

  
        <header class="clearfix">

      
              <h1 property="dc:title" datatype="" class="article-title">
                      BroadcastHub                  </h1>
      
      
    </header>
    
  <div class="article-content">
  <div class="field field-name-body field-type-text-with-summary field-label-hidden view-mode-full"><div class="field-items"><div class="field-item even" property="content:encoded"><h2 class="ai-header"><span style="color:green;">BroadcastHub</span></h2>
<p><a href="http://cs.usfca.edu/~wolber/appinventor/bookSplits/ch11BroadcastHub.pdf">Download Refined Version (Book Chapter PDF)</a></p>
<p>In this tutorial, you'll write an app that automatically responds to texts messages and broadcasts texts messages it receives to a list of phone numbers.The app is inspired by <a href="http://www.frontlinesms.com/">FrontLineSMS</a>, a tool that has been used in developing countries to <a href="http://news.bbc.co.uk/2/hi/technology/8209172.stm">monitor elections</a>, broadcast weather changes, and in general connect people that don't have access to the web but do have phones and mobile connectivity.</p>
<p>FrontLineSMS is software that runs on a computer with a phone plugged into it. The computer and plugged-in phone serve as a hub for SMS text communication amongst a group. You'll write a version of the software that runs on an Android phone, thus allowing the hub to be as mobile as the phones it connects.</p>
<p>This tutorial assumes you are familiar with the basics of App Inventor-- using the Component Designer to build a user interface, and using the Blocks Editor to specify event-handlers. If you are not familiar with the basics, try stepping through some of the <a href="tutorials.html">basic tutorials</a> before continuing.</p>
<p>The tutorial also assumes you have completed the <a href="textgroup.html">TextGroup</a> tutorial and thus are familiar with the basics of the <b>Texting</b> component.</p>
<h4 class="ai-header">Getting Started</h4>
<p>Connect to the App Inventor web site and start a new project. Name it <span style="color:green;">BroadcastHub</span>, and also set the screen's <b style="color:green;">Title</b> to "BroadcastHub". Open the Blocks Editor and connect to the phone.</p>
<h4 class="ai-header">Introduction</h4>
<p>BroadcastHub processes text messages that are received in the following manner: </p>
<ul><li>If the text message is from an unknown source, the app responds with a text that invites that source to join the broadcast list.</li>
<li>If the text message “joinabc” is received, the app adds the sender to the broadcast list.</li>
<li>If the text message is from a number already in the broadcast list, the message is broadcast to all numbers in the list.</li>
</ul><p>The tutorial covers the following App Inventor concepts:</p>
<ul><li>The <b>Texting</b> component for sending texts and processing received texts.</li>
<li>List variables to keep track of the numbers to text.</li>
<li>The <span class="ai-blocks">foreach</span> block that allows an app to repeat operations on a list of data (the list of phone numbers)</li>
</ul><h4 class="ai-header">Setting up the Components</h4>
<p>BroadcasterHub facilitates communication between mobile phones. Those phones need not have the BroadcasterHub app installed, or even be smart phones. The app is the hub, and the app's user interface is only for the administrator of the communications network.</p>
<p>For this sample, that user interface is simple: it will display the current <em>broadcast list</em> -- the list of phone numbers which have registered for the service-- and it will report all texts it receives and broadcasts.</p>
<p>To build the interface, add the following components:</p>
<table><tr style="background-color: #EFEFEF; font-weight: bold;"><td>
Component Type
</td>
<td>
Palette Group
</td>
<td>
What you'll name it
</td>
<td>
Purpose of Component
</td>
</tr><tr><td>
<b>Label</b>
</td>
<td>Basic</td>
<td style="color:green;">BroadcastListLabel</td>
<td>This will display the phone numbers that are registered.</td>
</tr><tr><td>
<b>Label</b>
</td>
<td>Basic</td>
<td style="color:green;">LogLabel</td>
<td>This will display a log of the texts received and broadcast.</td>
</tr><tr><td>
<b>Texting</b>
</td>
<td>Social</td>
<td style="color:green;">Texting1</td>
<td>The component that processes the texts</td>
</tr><tr><td>
<b>TinyDB</b>
</td>
<td>Basic</td>
<td style="color:green;">TinyDB1</td>
<td>To store the list of registered phone numbers</td>
</tr></table><ul><li>Set the <b style="color:green;">Width</b> of each of the labels to "Fill Parent" so that they span the phone horizontally. Set the <b style="color:green;">Height</b> for the labels to 200 pixels.</li>
<li>Set the <b style="color:green;">Text</b> property of BroadcastListLabel to "Broadcast List...".</li>
<li>Set the <b style="color:green;">Text</b> property of LogLabel to blank.</li>
</ul><p>BroadcastHub should look like this after its front-end is designed:</p>
<p><img src="http://beta.appinventor.mit.edu/learn/tutorials/broadcasterhub/BroadcasterHubAssets/broadcasterDesigner.png" /></p>
<h4 class="ai-header">Add behaviors to the components</h4>
<p>The activity for Broadcast Hub is not triggered by the user entering information or clicking a button, but by texts being received from outside sources. You'll need the following behaviors:</p>
<ul><li>When the text message is from an unknown source, the app responds with a text that invites that source to join the broadcast list.</li>
<li>When the text message "joinabc" is received, register the sender as part of the broadcast list.</li>
<li>When the text message is from a number already in the broadcast list, the message is broadcast to all numbers in the list.</li>
</ul><p>Start by creating the first behavior-- when you receive a text, send a message back to the sender inviting them to text a code, "joinabc", in order to register for the group. You'll need the following blocks:</p>
<table><tr style="background-color: #EFEFEF; font-weight: bold;"><td>
Block type
</td>
<td>
Drawer
</td>
<td>
Purpose
</td>
</tr><tr><td><span class="ai-blocks">Texting1.MessageReceived</span></td>
<td>Texting1</td>
<td>Event-handler triggered when the phone receives a text</td>
</tr><tr><td><span class="ai-blocks">set Texting1.PhoneNumber to</span></td>
<td>Texting1</td>
<td>To set the number for the return text</td>
</tr><tr><td><span class="ai-blocks">value number</span></td>
<td>My Definitions</td>
<td>Argument of <span class="ai-blocks">MessageReceived</span>, it is the phone number of sender </td>
</tr><tr><td><span class="ai-blocks">set Texting1.Message</span></td>
<td>Texting1</td>
<td>To set the invite message to send</td>
</tr><tr><td><span class="ai-blocks">text</span></td>
<td>Text</td>
<td>The invite message</td>
</tr><tr><td><span class="ai-blocks">Texting1.SendMessage</span></td>
<td>Texting1</td>
<td>Send it!</td>
</tr></table><p>The blocks should look like this:</p>
<p><img src="http://beta.appinventor.mit.edu/learn/tutorials/broadcasterhub/BroadcasterHubAssets/messageRcvd1.png" /></p>
<h4 class="ai-header">How the Blocks Work</h4>
<p><span class="ai-blocks">Texting1.MessageReceived</span> is triggered when any text message is received on the phone. The blocks within the event-handler set the PhoneNumber and Message of the Texting1 component, then send the message.</p>
<pre class="ai-testing"><b>Test the behavior.</b> You'll need another phone besides the one on which the app resides. From the second phone, send a text "hello" to the phone running the app. The second phone should receive a text that invites them to the group.</pre><h4 class="ai-header">Handling the "joinabc" text message</h4>
<p>Create the blocks for the second behavior: "when the text message "joinabc" is received, add the sender to the broadcast list." First, you'll need to define a list variable, BroadcastList, to store the phone numbers that register. From Definitions, drag out a def var block and name it "BroadcastList". Initialize it with a make a list block from Lists:</p>
<p><img src="http://beta.appinventor.mit.edu/learn/tutorials/broadcasterhub/BroadcasterHubAssets/BroadcastList.png" /></p>
<p>Next, modify the <span class="ai-blocks">Texting1.MessageReceived</span> event-handler so that it adds the sender's phone number to the BroadcastList if the message received is "joinabc". After you add the number to the list, display the new list in the BroadcastListLabel. You'll need the following blocks:</p>
<table><tr style="background-color: #EFEFEF; font-weight: bold;"><td>
Block type
</td>
<td>
Drawer
</td>
<td>
Purpose
</td>
</tr><tr><td><span class="ai-blocks">ifelse</span></td>
<td>Control</td>
<td>Depending on message received, you'll do different things</td>
</tr><tr><td>= block</td>
<td>Math</td>
<td>The test will be: is messageText equal to "joinabc"</td>
</tr><tr><td><span class="ai-blocks">value messageText</span></td>
<td>My Definitions</td>
<td>Plug into = block</td>
</tr><tr><td><span class="ai-blocks">text</span> ("joinabc")</td>
<td>Text</td>
<td>Plug into = block</td>
</tr><tr><td><span class="ai-blocks">add items to list</span></td>
<td>Lists</td>
<td>To add the sender's number to BroadcastList</td>
</tr><tr><td><span class="ai-blocks">BroadcastList</span></td>
<td>My Definitions</td>
<td>The list</td>
</tr><tr><td><span class="ai-blocks">value number</span></td>
<td>My Definitions</td>
<td>Plug in as item of <span class="ai-blocks">add items to list</span></td>
</tr><tr><td><span class="ai-blocks">set BroadcastListLabel.Text to</span></td>
<td>BroadcastListLabel</td>
<td>Display the new list</td>
</tr><tr><td><span class="ai-blocks">BroadcastList</span></td>
<td>My Definitions</td>
<td>Plug in to <span class="ai-blocks">set BroadcastListLabel.Text to</span> block</td>
</tr><tr><td><span class="ai-blocks">set Texting1.Message to</span></td>
<td>Texting1</td>
<td>Prepare Texting1 to send message back to sender</td>
</tr><tr><td><span class="ai-blocks">text</span> ("congrats, you ...")</td>
<td>Text</td>
<td>Congratulate sender for joining group</td>
</tr></table><p>The blocks should look like this:</p>
<p><img src="http://beta.appinventor.mit.edu/learn/tutorials/broadcasterhub/BroadcasterHubAssets/addtolist.png" /></p>
<h4 class="ai-header">How the Blocks Work</h4>
<p>The first row of blocks sets Texting1.PhoneNumber to the phone number of the message that was just received. The app then asks if the messageText was of the special code "joinabc". If so, the sender's phone number is added to the BroadcastList, and a congratulations message is sent. If the messageText is something other than "joinabc", the reply message is just the invitation message from before. After the <span class="ai-blocks">ifelse</span> block, the reply message is sent (bottom row).</p>
<pre class="ai-testing"><b>Test this behavior.</b> From a second phone, send the text message "joinabc" to the phone on which the app is running. Do you recieve the correct reply? Try sending a different text message as well to check if the ifelse is working correctly.</pre><h4 class="ai-header">Broadcasting Messages</h4>
<p>Next, you'll add the behavior so that the app broadcasts messages to the numbers in BroadcastList, if the message arrives from a number in BroadcastList. You'll need an additional <span class="ai-blocks">ifelse</span> block to check if the number is in the list, and a <span class="ai-blocks">foreach</span> block to send broadcast the message to each item in the list. Here are all the blocks you'll need:</p>
<table><tr style="background-color: #EFEFEF; font-weight: bold;"><td>
Block type
</td>
<td>
Drawer
</td>
<td>
Purpose
</td>
</tr><tr><td><span class="ai-blocks">ifelse</span></td>
<td>Control</td>
<td>Depending on whether sender is already in list, you'll do different things</td>
</tr><tr><td><span class="ai-blocks">is in list?</span></td>
<td>Lists</td>
<td>Checks to see if something is in a list</td>
</tr><tr><td><span class="ai-blocks">global BroadcastList</span></td>
<td>My Definitions</td>
<td>Plug into list slot of is in list?</td>
</tr><tr><td><span class="ai-blocks">value number</span></td>
<td>My Definitions</td>
<td>Plug into list slot of is in list?</td>
</tr><tr><td><span class="ai-blocks">foreach</span></td>
<td>Control</td>
<td>To repeatedly send out message to all in list</td>
</tr><tr><td><span class="ai-blocks">global BroadcastList</span></td>
<td>My Definitions</td>
<td>Plug into list slot of <span class="ai-blocks">foreach</span></td>
</tr><tr><td><span class="ai-blocks">set Texting1.Message to</span></td>
<td>Texting1</td>
<td>To set the message</td>
</tr><tr><td><span class="ai-blocks">value messageText</span></td>
<td>My Definitions</td>
<td>The message that was received and to be broadcast</td>
</tr><tr><td><span class="ai-blocks">set Texting1.Message to</span></td>
<td>Texting1</td>
<td>To set the phone number</td>
</tr><tr><td><span class="ai-blocks">value var</span></td>
<td>My Definitions</td>
<td>Holds the current item of the BroadcastList, it's a (phone) number</td>
</tr></table><p>The blocks should look like this:</p>
<p><img src="http://beta.appinventor.mit.edu/learn/tutorials/broadcasterhub/BroadcasterHubAssets/broadcastitNolog.png" /></p>
<h4 class="ai-header">How the Blocks Work</h4>
<p>The behavior is complex enough that it requires a "nested" <span class="ai-blocks">ifelse</span> block. If the phone number of the received message is already in the list, the <span class="ai-blocks">foreach</span> block is executed and the message relayed to all in the list. If the number is not in the list, the outer else-do clause is executed, and it asks another question, which is the test of the nested <span class="ai-blocks">ifelse</span> block: is the messageText equal to "joinabc". The app then branches one of two ways based on the answer.</p>
<p>In general, <span class="ai-blocks">if</span> and <span class="ai-blocks">ifelse</span> blocks can be nested to arbitrary levels, giving you the power to program arbitrarily complex behaviors.</p>
<pre class="ai-testing"><b>Test this behavior.</b> First, have two different phones register with the app by texting "joinabc" to the phone which is running the app.Then text another message from one of the phones. Both phones should receive the text.</pre><h4 class="ai-header">Logging the broadcasted texts</h4>
<p>When a text is received and broadcast out to the other phones, the app should log that occurrence to the app so the administrator can monitor the activity. Earlier, you added the label LogLabel to the user interface for this purpose. Now, you'll code some blocks that change LogLabel each time a new text arrives.</p>
<p>You need to build a text that says something like "message from 111-2222 broadcast". The 111-2222 is not fixed data, but is the value of the variable number that comes with the MessageReceived event. So to build the text, you'll concatenate the first part "message from" with the variable number and finally with the last part of the message, the text "broadcast".</p>
<p>There are two functions in the Text drawer to build text. One is the join function, which joins two pieces of text. Another function, <span class="ai-blocks">make text</span>, is also available and more convenient to use than join when you have more than two parts. You'll use it for this behavior. Here are all the blocks you'll need:</p>
<table><tr style="background-color: #EFEFEF; font-weight: bold;"><td>
Block type
</td>
<td>
Drawer
</td>
<td>
Purpose
</td>
</tr><tr><td><span class="ai-blocks">set LogLabel.Text to</span></td>
<td>LogLabel</td>
<td>Display the log here</td>
</tr><tr><td><span class="ai-blocks">make text</span></td>
<td>Text</td>
<td>Build a text object out of multiple parts</td>
</tr><tr><td><span class="ai-blocks">text</span> ("message from")</td>
<td>Text</td>
<td>Report message</td>
</tr><tr><td><span class="ai-blocks">value number</span></td>
<td>My Definitions</td>
<td>The number of the sender</td>
</tr><tr><td><span class="ai-blocks">text</span> ("broadcast\n")</td>
<td>Text</td>
<td>Text is "message from 111-2222 broadcast" with newline</td>
</tr><tr><td><span class="ai-blocks">LogLabel.Text</span></td>
<td>LogLabel</td>
<td>Add new log to the previous ones</td>
</tr></table><p>The blocks should look like this:</p>
<p><img src="http://beta.appinventor.mit.edu/learn/tutorials/broadcasterhub/BroadcasterHubAssets/broadcastit.png" /></p>
<h4 class="ai-header">How the Blocks Work</h4>
<p>After broadcasting the message to all the numbers in BroadcastList , the app now modifies the LogLabel to include a report of the just broadcasted text. If the sender's number (value number) is "1112222", then the <span class="ai-blocks">make text</span> will build the text object:</p>
<p>message from: 1112222 broadcast</p>
<p>along with the log reports that were already in LogLabel.Text from previously received texts. The "\n" is the newline character that causes the old reports to be displayed on the next line, e.g.,</p>
<p>message from: 1112222 broadcast<br />
message from: 555-6666 broadcast</p>
<h4 class="ai-header">Storing the BroadcastList in a Database</h4>
<p>As is, the app works, but every time you close the app the BroadcastList will be lost and everyone would have to re-register. To fix this, you'll use the <b>TinyDB</b> component to store and retrieve the BroadcastList to and from a database. TinyDB allows you to store data persistently-- even if the app is closed, the next time you open the app the data will be there. </p>
<p>The general scheme for storing data persistently is the following: When the app begins, load the list from the database into a variable (e.g., BroadcastList ). Then, each time a new item is added to the list, update the database version of the list. </p>
<p>Start by coding the blocks to store the list in the database. With the TinyDB component, a tag is used to identify the data and distinguish it from other data stored in the database. In this case, you can tag the data as "broadcastList". Do the following: </p>
<ol><li>Drag out a <span class="ai-blocks">TinyDB1.StoreValue</span> block from the TinyDB1 drawer.</li>
<li>Create a <span class="ai-blocks">text</span> block and give it the text "broadcastList". Place this text block as the tag of StoreValue.</li>
<li>Drag out a reference to BroadcastList from My Definitions . Place it as the value argument of StoreValue.</li>
<li>Place the StoreValue block right below the blocks that add an item to the BroadcastList.</li>
</ol><p>The bottom part of the modified <span class="ai-blocks">Texting1.MessageReceived</span> event-handler should look like the following:</p>
<p><img src="http://beta.appinventor.mit.edu/learn/tutorials/broadcasterhub/BroadcasterHubAssets/storeBroadcastList.png" /></p>
<h4 class="ai-header">How the Blocks Work</h4>
<p><span class="ai-blocks">TinyDB1.StoreValue</span> stores the data in BroadcastList to a database with a tag that you can later use to retrieve the data into your app. In this case, the tag is the text, "broadcastList", and he value is the actual list BroadcastList.</p>
<h4 class="ai-header">Loading the BroadcastList from a Database</h4>
<p>Now add the blocks for loading the list back in each time the app begins. When the app begins, the <span class="ai-blocks">Screen1.Initialize</span> event is triggered, so your blocks will go in that event-handler. You’ll call <span class="ai-blocks">TinyDB.GetValue</span>, using the same tag you used to store the list (“broadcastList”). Check if the returned value is a list, because it won’t be if there isn’t any data in the list yet.</p>
<p>The blocks should look like:</p>
<p><img src="http://beta.appinventor.mit.edu/learn/tutorials/broadcasterhub/BroadcasterHubAssets/getValue.png" /></p>
<h4 class="ai-header">How the Blocks Work</h4>
<p>The blocks first define a variable, valueFromDB, which is used to temporarily store the data returned from the database. When the app begins, the <span class="ai-blocks">Screen1.Initialize</span> event is triggered. <span class="ai-blocks">TinyDB.GetValue</span> is called, and the data from the database is placed in valueFromDB.</p>
<p>The variable is then checked to see if it is a list. If it is not, that means there was no data for the tag “broadcastList” in the database, and an empty text has been returned. This will happen the first time a user opens the app.</p>
<p>If valueFromDB is a list, the list is placed into the variable BroadcastList and the list is displayed.</p>
<pre class="ai-testing"><b>Test this behavior.</b> Choose <b>Restart App</b> which will trigger the <span class="ai-blocks" style="color:black;">Screen1.Initialize</span>. Do the numbers registered earlier appear?</pre><h4 class="ai-header">Display BroadcastList with each number on separate lines</h4>
<p>Create a procedure <span class="ai-blocks">displayBroadcastList</span>, which displays the list with each phone number on a separate line. Be sure and call the procedure from below the <span class="ai-blocks&gt;add items to list&lt;/span&gt; block so that the updated list is displayed.&lt;/p&gt;&#10;&lt;p&gt;For help displaying the list on separate lines, see &lt;a href="%3d.html"">Displaying a List.</span></p>
<p>You'll need the following blocks:</p>
<table><tr style="background-color: #EFEFEF; font-weight: bold;"><td>
Block type
</td>
<td>
Drawer
</td>
<td>
Purpose
</td>
</tr><tr><td><span class="ai-blocks">procedure</span> ("displayBroadcastList")</td>
<td>Definitions</td>
<td>Create the procedure</td>
</tr><tr><td><span class="ai-blocks">set BroadcastListLabel.Text to</span></td>
<td>BroadcastListLabel</td>
<td>Display the list here</td>
</tr><tr><td><span class="ai-blocks">text</span> ("Phone Numbers...")</td>
<td>Text</td>
<td>The header for the list</td>
</tr><tr><td><span class="ai-blocks">foreach</span></td>
<td>Control</td>
<td>Iterate through the numbers</td>
</tr><tr><td><span class="ai-blocks">name pnumber</span></td>
<td>in the <span class="ai-blocks">foreach</span></td>
<td>Name the <span class="ai-blocks">foreach</span> variable "pnumber". This is the current item of the <span class="ai-blocks">foreach</span></td>
</tr><tr><td><span class="ai-blocks">BroadcastList</span></td>
<td>My Definitions</td>
<td>Plug into in list slot of <span class="ai-blocks">foreach</span></td>
</tr><tr><td><span class="ai-blocks">set BroadcastListLabel.Text to</span></td>
<td>BroadcastListLabel</td>
<td>Modify with each of the numbers</td>
</tr><tr><td><span class="ai-blocks">make text</span></td>
<td>Text</td>
<td>Build a text object from multiple parts</td>
</tr><tr><td><span class="ai-blocks">BroadcastListLabel.Text</span></td>
<td>BroadcastListLabel</td>
<td>Add to the label on each iteration of <span class="ai-blocks">foreach</span></td>
</tr><tr><td><span class="ai-blocks">text</span> ("\n")</td>
<td>Text</td>
<td>Newline character so that next number is on next line</td>
</tr><tr><td><span class="ai-blocks">value pnumber</span></td>
<td>My Definitions</td>
<td>The current number from the list</td>
</tr></table><p>The <span class="ai-blocks">displayBroadcastList</span> procedure should look like this:</p>
<p><img src="http://beta.appinventor.mit.edu/learn/tutorials/broadcasterhub/BroadcasterHubAssets/displayBroadcastList.png" /></p>
<h4 class="ai-header">How the Blocks Work</h4>
<p>The <span class="ai-blocks">foreach</span> in <span class="ai-blocks">displayBroadcastList</span> successively adds a phone number to the end of the label, placing a newline character in between each item.</p>
<p>Of course this procedure will not do anything unless you call it: you should add two calls to the procedure: one within the <span class="ai-blocks">Texting1.MessageReceived</span> event-handler, and one within the <span class="ai-blocks">Screen1.Initialize</span> event-handler. The call <span class="ai-blocks">displayBroadcastList</span> block can be found in My Definitions, and it should replace the blocks that directly set the BroadcastListLabel.Text to the list. You can see how these calls to <span class="ai-blocks">displayBroadcastList</span> should look in the snapshot of the final version below.</p>
<pre class="ai-testing"><b>Test this behavior.</b> Try adding some more phone numbers to the list. Do the registered phone numbers now appear on separate lines?</pre><h4 class="ai-header">Broadcast Hub, Final Version</h4>
<p><img src="http://beta.appinventor.mit.edu/learn/tutorials/broadcasterhub/BroadcasterHubAssets/finalversion.png" /></p>
<h4 class="ai-header">Variations</h4>
<p>Once you get the Broadcast Hub app working, you might want to explore some variations. For example,</p>
<ul><li>Allow client phones to remove themselves from the list by texting "quitabc" to the app.</li>
<li>Let the hub administrator (the user of your app) add and remove numbers from the broadcast list.</li>
<li>Let the hub administrator specify numbers that should not be allowed into the list.</li>
</ul><h4 class="ai-header">Review</h4>
<p>Here are some of the ideas covered in this tutorial: </p>
<ul><li>Apps can react to events, like a text being received, that are not initiated by the user of the app.</li>
<li>Nested <span class="ai-blocks">ifelse</span> and <span class="ai-blocks">foreach</span> blocks can be used to code complex behaviors.</li>
<li>The <span class="ai-blocks">make text</span> block can be used to build a text object out of multiple parts.</li>
<li><b>TinyDB</b> can be used to store and retrieve data from a database. A general scheme is to call <span class="ai-blocks">StoreValue</span> to update the database whenever the data changes, and call <span class="ai-blocks">GetValue</span> to retrieve the database data when the app begins.</li>
</ul><h4 class="ai-header">Scan the Sample App to your Phone</h4>
<p>Scan the following barcode onto your phone to install and run the sample app.</p>
<p><img src="http://beta.appinventor.mit.edu/learn/tutorials/broadcasterhub/BroadcasterHubAssets/broadcastbarcode.png" /></p>
<h4 class="ai-header"><a href="http://beta.appinventor.mit.edu/learn/tutorials/broadcasterhub/BroadcasterHubAssets/broadcastbarcode.png">http://beta.appinventor.mit.edu/learn/tutorials/broadcasterhub/Broadcast...</a></h4>
<p>If you'd like to work with this sample in App Inventor, download the <a href="http://beta.appinventor.mit.edu/learn/tutorials/broadcasterhub/BroadcasterHubAssets/broadcastHub.zip">source code</a> to your computer, then open App Inventor, go to the My Projects page, and choose <b>More Actions | Upload Source</b>.</p>
<pre class="ai-box">MIT and Google are grateful to <a href="http://www.appinventor.org/">Professor David Wolber</a>, CS Professor at The University of San Francisco, for developing this tutorial.

Done with <span style="color:black;">BroadcastHub</span>? Return to the other tutorials <a href="tutorials.html">here</a>.</pre></div></div></div>  </div>

  
  
</article>
    </div>
  </div>
</div>
  </div>
</div>

        
      </section>

      
    </div></div>

          <div class="region region-sidebar-second sidebar">
    <div id="block-block-1" class="block block-block block-odd block-count-3 block-region-sidebar-second">
  <div class="block-inner clearfix">
                <div class="block-content content no-title">
      <p><a href="http://beta.appinventor.mit.edu/"><img src="../sites/explore.appinventor.mit.edu/files/use_mit_app_inventor_button.png" alt="Use MIT App Inventor" /></a></p>
<p>All you need to get started with MIT App Inventor is a Google account to log in.</p>
    </div>
  </div>
</div>
<div id="block-block-4" class="block block-block block-even block-count-4 block-region-sidebar-second">
  <div class="block-inner clearfix">
                <div class="block-content content no-title">
      <p><a href="http://appinventor.mit.edu/teach"><img src="../sites/explore.appinventor.mit.edu/files/resources_for_educators_button.png" alt="Resources For Educators" /></a></p>
<p>New! <a href="http://appinventor.mit.edu/teach/curriculum.html">MIT App Inventor Curriculum Now Available</a></p>
<p>
</p><hr />    </div>
  </div>
</div>
<section id="block-block-6" class="block block-block block-odd block-count-5 block-region-sidebar-second">
  <div class="block-inner clearfix">
              <h2 class="block-title">Phones &amp; Tablets Database</h2>
            <div class="block-content content">
      <p>Learn from and contribute to the <a href="http://bit.ly/AppInvDevices">database of devices known to work with App Inventor</a>.</p>
    </div>
  </div>
</section>
  </div>
    
  </div></div>

      <footer role="contentinfo">
              <div class="region region-footer">
    <div id="block-block-3" class="block block-block block-odd block-count-6 block-region-footer">
  <div class="block-inner clearfix">
                <div class="block-content content no-title">
      <p style="text-align: center;"><a rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/"><img alt="Creative Commons License" src="http://i.creativecommons.org/l/by-sa/3.0/88x31.png" /></a> <br />
This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/">Creative Commons Attribution-ShareAlike 3.0 Unported License</a></p>
<p style="text-align: center;">© 2012 <a href="http://web.mit.edu/">Massachusetts Institute of Technology</a></p>
<p style="text-align: center;"><a href="contact.html">Contact Us</a></p>
    </div>
  </div>
</div>
  </div>
    </footer>
  
</div>

  </body>

<!-- Mirrored from explore.appinventor.mit.edu/content/broadcasthub by HTTrack Website Copier/3.x [XR&CO'2010], Fri, 14 Sep 2012 00:26:04 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8"><!-- /Added by HTTrack -->
</html>
