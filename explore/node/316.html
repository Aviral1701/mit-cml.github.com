<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML+RDFa 1.0//EN"
  "http://www.w3.org/MarkUp/DTD/xhtml-rdfa-1.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" version="XHTML+RDFa 1.0" dir="ltr"
  xmlns:content="http://purl.org/rss/1.0/modules/content/"
  xmlns:dc="http://purl.org/dc/terms/"
  xmlns:foaf="http://xmlns.com/foaf/0.1/"
  xmlns:og="http://ogp.me/ns#"
  xmlns:rdfs="http://www.w3.org/2000/01/rdf-schema#"
  xmlns:sioc="http://rdfs.org/sioc/ns#"
  xmlns:sioct="http://rdfs.org/sioc/types#"
  xmlns:skos="http://www.w3.org/2004/02/skos/core#"
  xmlns:xsd="http://www.w3.org/2001/XMLSchema#">

<head profile="http://www.w3.org/1999/xhtml/vocab">
  <meta charset="utf-8" />
<meta about="/content/text-group-part-2" property="sioc:num_replies" content="0" datatype="xsd:integer" />
<link rel="shortcut icon" href="../sites/explore.appinventor.mit.edu/files/MIT_App_Inventor_favicon_0.ico" type="image/vnd.microsoft.icon" />
<meta content="TextGroup (Part 2)" about="/content/text-group-part-2" property="dc:title" />
<link rel="shortlink" href="316.html" />
<meta name="Generator" content="Drupal 7 (http://drupal.org)" />
<link rel="canonical" href="../content/text-group-part-2.html" />
  <title>TextGroup (Part 2) | Explore MIT App Inventor</title>
  <style>@import url("../modules/system/system.base607f.css?mp0ld1");
@import url("../modules/system/system.menus607f.css?mp0ld1");
@import url("../modules/system/system.messages607f.css?mp0ld1");
@import url("../modules/system/system.theme607f.css?mp0ld1");</style>
<style>@import url("../modules/comment/comment607f.css?mp0ld1");
@import url("../modules/field/theme/field607f.css?mp0ld1");
@import url("../modules/node/node607f.css?mp0ld1");
@import url("../modules/search/search607f.css?mp0ld1");
@import url("../modules/user/user607f.css?mp0ld1");
@import url("../sites/all/modules/views/css/views607f.css?mp0ld1");</style>
<style>@import url("../sites/all/modules/ctools/css/ctools607f.css?mp0ld1");
@import url("../sites/all/modules/panels/css/panels607f.css?mp0ld1");
@import url("../sites/all/modules/extlink/extlink607f.css?mp0ld1");</style>
<style>@import url("../sites/all/themes/adaptivetheme/adaptivetheme/css/at.base607f.css?mp0ld1");
@import url("../sites/all/themes/adaptivetheme/adaptivetheme/css/at.layout607f.css?mp0ld1");
@import url("../sites/all/themes/adaptivetheme/adaptivetheme/css/at.messages607f.css?mp0ld1");
@import url("../sites/all/themes/sky/css/html-elements607f.css?mp0ld1");
@import url("../sites/all/themes/sky/css/forms607f.css?mp0ld1");
@import url("../sites/all/themes/sky/css/tables607f.css?mp0ld1");
@import url("../sites/all/themes/sky/css/page607f.css?mp0ld1");
@import url("../sites/all/themes/sky/css/articles607f.css?mp0ld1");
@import url("../sites/all/themes/sky/css/comments607f.css?mp0ld1");
@import url("../sites/all/themes/sky/css/fields607f.css?mp0ld1");
@import url("../sites/all/themes/sky/css/blocks607f.css?mp0ld1");
@import url("../sites/all/themes/sky/css/navigation607f.css?mp0ld1");
@import url("../sites/explore.appinventor.mit.edu/files/color/newexploretheme-991117ab/colors607f.css?mp0ld1");
@import url("../sites/all/themes/sky/css/sky.settings.style607f.css?mp0ld1");
@import url("../sites/all/themes/newexploretheme/css/NewExploretheme607f.css?mp0ld1");</style>
<style media="print">@import url("../sites/all/themes/sky/css/print607f.css?mp0ld1");</style>
<link type="text/css" rel="stylesheet" href="../sites/all/themes/sky/css/sky.responsive.style607f.css?mp0ld1" media="all" />
<link type="text/css" rel="stylesheet" href="../sites/all/themes/sky/css/sky.responsive.gpanels607f.css?mp0ld1" media="all" />
<link type="text/css" rel="stylesheet" href="../sites/explore.appinventor.mit.edu/files/at_css/newexploretheme.responsive.layout607f.css?mp0ld1" media="all" />

<!--[if lt IE 9]>
<link type="text/css" rel="stylesheet" href="http://explore.appinventor.mit.edu/sites/explore.appinventor.mit.edu/files/at_css/newexploretheme.lt-ie9.layout.css?mp0ld1" media="all" />
<![endif]-->
  <script src="../misc/jquery1cc4.js?v=1.4.4"></script>
<script src="../misc/jquery.once7839.js?v=1.2"></script>
<script src="../misc/drupal607f.js?mp0ld1"></script>
<script src="../sites/all/modules/panels/js/panels607f.js?mp0ld1"></script>
<script src="../sites/all/modules/extlink/extlink607f.js?mp0ld1"></script>
<script src="../sites/all/modules/google_analytics/googleanalytics607f.js?mp0ld1"></script>
<script>var _gaq = _gaq || [];_gaq.push(["_setAccount", "UA-31803258-1"]);_gaq.push(["_trackPageview"]);(function() {var ga = document.createElement("script");ga.type = "text/javascript";ga.async = true;ga.src = ("https:" == document.location.protocol ? "https://ssl" : "http://www") + ".google-analytics.com/ga.js";var s = document.getElementsByTagName("script")[0];s.parentNode.insertBefore(ga, s);})();</script>
<script src="../sites/all/themes/sky/js/scripts607f.js?mp0ld1"></script>
<script>jQuery.extend(Drupal.settings, {"basePath":"\/","pathPrefix":"","ajaxPageState":{"theme":"newexploretheme","theme_token":"PLLjC-nS0aLZypRxnYur9re0H9LvJ2XNO_fl7gu8i-8","js":{"misc\/jquery.js":1,"misc\/jquery.once.js":1,"misc\/drupal.js":1,"sites\/all\/modules\/panels\/js\/panels.js":1,"sites\/all\/modules\/extlink\/extlink.js":1,"sites\/all\/modules\/google_analytics\/googleanalytics.js":1,"0":1,"sites\/all\/themes\/sky\/js\/scripts.js":1},"css":{"modules\/system\/system.base.css":1,"modules\/system\/system.menus.css":1,"modules\/system\/system.messages.css":1,"modules\/system\/system.theme.css":1,"modules\/comment\/comment.css":1,"modules\/field\/theme\/field.css":1,"modules\/node\/node.css":1,"modules\/search\/search.css":1,"modules\/user\/user.css":1,"sites\/all\/modules\/views\/css\/views.css":1,"sites\/all\/modules\/ctools\/css\/ctools.css":1,"sites\/all\/modules\/panels\/css\/panels.css":1,"sites\/all\/modules\/extlink\/extlink.css":1,"sites\/all\/themes\/adaptivetheme\/adaptivetheme\/css\/at.base.css":1,"sites\/all\/themes\/adaptivetheme\/adaptivetheme\/css\/at.layout.css":1,"sites\/all\/themes\/adaptivetheme\/adaptivetheme\/css\/at.messages.css":1,"sites\/all\/themes\/sky\/css\/html-elements.css":1,"sites\/all\/themes\/sky\/css\/forms.css":1,"sites\/all\/themes\/sky\/css\/tables.css":1,"sites\/all\/themes\/sky\/css\/page.css":1,"sites\/all\/themes\/sky\/css\/articles.css":1,"sites\/all\/themes\/sky\/css\/comments.css":1,"sites\/all\/themes\/sky\/css\/fields.css":1,"sites\/all\/themes\/sky\/css\/blocks.css":1,"sites\/all\/themes\/sky\/css\/navigation.css":1,"sites\/all\/themes\/newexploretheme\/color\/colors.css":1,"sites\/all\/themes\/sky\/css\/sky.settings.style.css":1,"sites\/all\/themes\/newexploretheme\/css\/NewExploretheme.css":1,"sites\/all\/themes\/sky\/css\/print.css":1,"sites\/all\/themes\/sky\/css\/sky.responsive.style.css":1,"sites\/all\/themes\/sky\/css\/sky.responsive.gpanels.css":1,"public:\/\/at_css\/newexploretheme.responsive.layout.css":1,"public:\/\/at_css\/newexploretheme.lt-ie9.layout.css":1}},"extlink":{"extTarget":"_blank","extClass":"ext","extSubdomains":1,"extExclude":"","extInclude":"","extAlert":0,"extAlertText":"This link will take you to an external web site. We are not responsible for their content.","mailtoClass":"mailto"},"googleanalytics":{"trackOutbound":1,"trackMailto":1,"trackDownload":1,"trackDownloadExtensions":"7z|aac|arc|arj|asf|asx|avi|bin|csv|doc|exe|flv|gif|gz|gzip|hqx|jar|jpe?g|js|mp(2|3|4|e?g)|mov(ie)?|msi|msp|pdf|phps|png|ppt|qtm?|ra(m|r)?|sea|sit|tar|tgz|torrent|txt|wav|wma|wmv|wpd|xls|xml|z|zip"}});</script>
<!-- Put the following javascript before the closing </head> tag. -->
<script>
 ( function() {
    var cx = '009943970440830858880:hxy3yq9wtr0';
    var gcse = document.createElement('script'); gcse.type = 'text/javascript'; gcse.async = true;
    gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
        '//www.google.com/cse/cse.js?cx=' + cx;
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(gcse, s);
  })();
</script>
</head>
<body class="html not-front not-logged-in one-sidebar sidebar-second page-node page-node- page-node-316 page-type-tutorial i18n-en lang-en site-name-explore-mit-app-inventor section-content site-name-hidden color-scheme-custom newexploretheme gecko win fs-small bs-n bb-n mb-dd rc-0 rct-8 ia-r bf-l snf-a ssf-a ptf-a ntf-a ctf-a btf-a" >
  <div id="skip-link">
    <a href="#main-content" class="element-invisible element-focusable">Skip to main content</a>
  </div>
    <div id="page" class="container">

  
  <header class="clearfix" role="banner">

<!--    <div id="branding">
              <hgroup class="element-invisible">
                      <h1 id="site-name" class="element-invisible"><a href="/" title="Home page">Explore MIT App Inventor</a></h1>
                            </hgroup>
                </div>-->

          <div id="menu-bar" class="nav clearfix">
      <nav id="block-system-main-menu" class="block block-system block-menu block-odd block-count-1 block-region-menu-bar menu-wrapper clearfix">
              <h2 class="block-title element-invisible element-invisible">Main menu</h2>
            <ul class="menu clearfix"><li class="first collapsed menu-item-218"><a href="../index-2.html" title="Explore MIT App Inventor Home Page">Home</a></li><li class="collapsed menu-item-686"><a href="../news-events.html" title="Upcoming events and recent news">News+Events</a></li><li class="leaf menu-item-432"><a href="../forums.html" title="MIT App Inventor forums">Forums</a></li><li class="collapsed menu-item-1644"><a href="../resources.html" title="Resources related to MIT App Inventor">Resources</a></li><li class="collapsed menu-item-525"><a href="../support.html" title="Support on using MIT App Inventor">Support</a></li><li class="collapsed menu-item-438"><a href="../stories.html" title="Stories about Users&#039; Successes with MIT App Inventor">Stories</a></li><li class="collapsed menu-item-1346"><a href="../content/setup-mit-app-inventor.html" title="Get setup to use App Inventor">Setup</a></li><li class="collapsed menu-item-2106"><a href="../teach.html" title="Materials for teaching App Inventor">Teach</a></li><li class="last leaf menu-item-527"><a href="http://beta.appinventor.mit.edu/" title="Start using App Inventor">Invent</a></li></ul>  </nav>
  </div>

  </header>

  <div id="columns"class="no-menu-bar"><div class="columns-inner clearfix">

            
    
    <div id="content-column"><div class="content-inner">

      
            <section id="main-content" role="main">

                        
        
        <div id="content">  <div class="region region-content">
    <div id="block-system-main" class="block block-system block-odd block-count-2 block-region-content">
  <div class="block-inner clearfix">
                <div class="block-content content no-title">
      <article id="article-316" class="article article-type-tutorial article-lang-en odd article-full clearfix" about="/content/text-group-part-2" typeof="sioc:Item foaf:Document" role="article">

  
        <header class="clearfix">

      
              <h1 property="dc:title" datatype="" class="article-title">
                      TextGroup (Part 2)                  </h1>
      
      
    </header>
    
  <div class="article-content">
  <div class="field field-name-body field-type-text-with-summary field-label-hidden view-mode-full"><div class="field-items"><div class="field-item even" property="content:encoded"><style>
<!--/*--><![CDATA[/* ><!--*/

li {
padding-bottom: 7px;
}

.basicblock {
border: 1px dashed #7AA81C;
padding-left: 4px;
padding-right: 4px;
padding-top: 1px;
padding-bottom: 1px;
background-color: #E7F2CB;
font-size: 9pt;
text-wrap: suppress;
	
}

.callblock {
border: 1px dashed #000000;
padding-left: 4px;
padding-right: 4px;
padding-top: 1px;
padding-bottom: 1px;
background-color: #E0D1FF;
font-size: 9pt;
text-wrap: suppress;

}

.argblock {
border: 1px dashed #000000;
padding-left: 4px;
padding-right: 4px;
padding-top: 1px;
padding-bottom: 1px;
background-color: #E5E5FF;
font-size: 9pt;
text-wrap: suppress;

}

.textblock {
border: 1px dashed #000000;
padding-left: 4px;
padding-right: 4px;
padding-top: 1px;
padding-bottom: 1px;
background-color: #FADAA0;
font-size: 9pt;
text-wrap: suppress;

}

.setblock {
border: 1px dashed #000000;
padding-left: 4px;
padding-right: 4px;
padding-top: 1px;
padding-bottom: 1px;
background-color: #C1D5F8;
font-size: 9pt;
text-wrap: suppress;
}

.controlblock {
border: 1px dashed #000000;
padding-left: 4px;
padding-right: 4px;
padding-top: 1px;
padding-bottom: 1px;
background-color: #FAEDBB;
font-size: 9pt;
text-wrap: suppress;
}

/*--><!]]>*/
</style><h2 class="ai-header"><span style="color:green;">Text Group Part II: Adding and Removing Members</span></h2>
<h4 class="ai-header">What you're building</h4>
<p><img src="../sites/all/files/tutorials/textGroup2/textGroup2emulator.png" style="float:right; width:250px;" /></p>
<p>This tutorial extends the <a href="../content/textgroup.html">Text Group</a> tutorial. That app sent a text to a fixed list of phone numbers, and only the programmer could change the numbers in the list. The app in this tutorial allows the user to add and remove the phone numbers in the list, and it stores the list persistently in a database. </p>
<h4 class="ai-header">Getting started</h4>
<p>Connect to the App Inventor web site and open your TextGroup project (if you haven't completed that tutorial, do so now before continuing). SaveAs the app and name it "TextGroup2". You can leave the screen's <b style="color:green;">Title</b> as "Text Group". Open the Blocks Editor and connect to the phone.</p>
<h4 class="ai-header">Introduction</h4>
<p>You'll design the app so that the user adds phone numbers to the group by choosing from the phone's contact list, and removes them by choosing from the items already in the group.. You'll store the list of numbers in a database so that they are there even when the app is closed and re-launched.</p>
<p>The tutorial covers the following App Inventor components and concepts:</p>
<ul><li>The <span class="control">foreach</span> block for repeating operations on a list.</li>
<li>The <b>PhoneNumberPicker</b> component for accessing the phone's contacts.</li>
<li>The <b>ListPicker</b> component for allowing the user to choose a number for removal.</li>
<li>The <b>Texting</b> component for sending texts.</li>
<li>The <b>TinyDB</b> database component for storing the phone list in a database. </li>
</ul><h4 class="ai-header">Set up the Components</h4>
<p>The user interface for Text Group, Part II has a textbox, button, and status label for sending the group text, just as in Part I. If you performed a SaveAs to begin this project, those components should already be in the view. You should then add a <b>PhoneNumberPicker</b> and <b>ListPicker</b> components for adding and removing phone numbers from the list, along with a <b>Texting</b> component and a <b>TinyDB</b> component, both of which will appear in the "non-visual" component area. A table of detailed instructions for designing the components is below, but you can also build it from the following picture of what it should look like:</p>
<p><img src="../sites/all/files/tutorials/textGroup2/designerPart2.png" /></p>
<p>The components listed below were used to create the designer window shown above. The first four were part of TextGroup so will already be there if you built that app and performed a SaveAs to begin this one. You'll need to drag each of the other components from the Palette into the Viewer and name it as specified below:</p>
<table><tr style="background-color: #EFEFEF; font-weight: bold;"><td>
Component Type
</td>
<td>
Palette Group
</td>
<td>
What you'll name it
</td>
<td>
Purpose of Component
</td>
</tr><tr><td>
<b>TextBox</b>
</td>
<td>Basic</td>
<td style="color:green;">MessageText</td>
<td>User will enter message here.</td>
</tr><tr><td>
<b>Button</b>
</td>
<td>Basic</td>
<td style="color:green;">TextGroupButton</td>
<td>User enters the message here</td>
</tr><tr><td>
<b>Label</b>
</td>
<td>Basic</td>
<td style="color:green;">StatusLabel</td>
<td>Reports when texts have been sent</td>
</tr><tr><td>
<b>Texting</b>
</td>
<td>Social</td>
<td style="color:green;">Texting1</td>
<td>The component that sends the texts</td>
</tr><tr><td>
<b>Label</b>
</td>
<td>Basic</td>
<td style="color:green;">GroupHeadingLabel</td>
<td>Header for the list of phone numbers that will appear</td>
</tr><tr><td>
<b>Label</b>
</td>
<td>Basic</td>
<td style="color:green;">MembersLabel</td>
<td>This is where the list of phone numbers will appear</td>
</tr><tr><td>
<b>Horizontal Arrangement</b>
</td>
<td>Screen Arrangement</td>
<td style="color:green;">HorizontalArrangement1</td>
<td>To organize the add and remove buttons (pickers) horizontally</td>
</tr><tr><td>
<b>PhoneNumberPicker</b>
</td>
<td>Social</td>
<td style="color:green;">PhoneNumberPicker1</td>
<td>Allow user to choose from numbers in contact list</td>
</tr><tr><td>
<b>ListPicker</b>
</td>
<td>Basic</td>
<td style="color:green;">RemoveListPicker</td>
<td>Allow user to remove number from phone numbers in group</td>
</tr><tr><td>
<b>TinyDB</b>
</td>
<td>Basic</td>
<td style="color:green;">TinyDB1</td>
<td>For storing and retrieving group's phone numbers from database</td>
</tr></table><p>Set the properties of the components in the following way:</p>
<ul><li>Set the <b style="color:green;">Hint</b> of MessageText to "enter a message"</li>
<li>Set the <b style="color:green;">Text</b> of TextGroupButton to "Text Group"</li>
<li>Set the <b style="color:green;">Text</b> of StatusLabel to "status".</li>
<li>Set the <b style="color:green;">Text</b> of GroupHeadingLabel to "-- Group -- ".</li>
<li>Set the <b style="color:green;">Text</b> of MembersLabel to "members will appear here".</li>
<li>Set the <b style="color:green;">Text</b> of PhoneNumberPicker1 to "Add Member".</li>
<li>Set the <b style="color:green;">Text</b> of RemoverListPicker to "Remove Member"</li>
</ul><h4 class="ai-header">Add behaviors to the components </h4>
<p>If you completed Text Group, Part I, you should have the following list defined in the Blocks Editor:</p>
<p><img src="../sites/all/files/tutorials/textGroup2/phonelist.png" /></p>
<p>For this app, you still want the list but you don't want any pre-defined numbers in it-- the numbers will be added by the end-user of the app. So remove the text blocks with the numbers and leave the <span class="ai-blocks">make a list</span> block empty:</p>
<p><img src="../sites/all/files/tutorials/textGroup2/emptylist.png" /></p>
<p>You'll need to add the following behaviors:</p>
<ol><li>When the user clicks the "Add Member" button (the button associated with the PhoneNumberPicker), the picker will appear for the user to choose a number. When the choice is made, the app will add the chosen number to the PhoneNumbers list and update the database.</li>
<li>When the user clicks the "Remove Member" button (the button associated with the RemovListPicker), the picker will appear for the user to choose one of the numbers already in PhoneNumbers. When the choice is made, the app will remove the number from the list and update the database.</li>
<li>When the app begins, the numbers stored in the database are retrieved and loaded into PhoneNumbers.</li>
</ol><h4 class="ai-header">Adding a Phone Number (Member) to the Group </h4>
<p>The list of phone numbers in the contact list will appear when the user clicks the PhoneNumberPicker 's associated button: that behavior is built-in to the component. When the user makes a choice from the contact list, PhoneNumberPicker 's AfterPicking event is triggered-- your job is to program this to add the chosen item to the list and update the database.</p>
<p>You'll need the following blocks:</p>
<table><tr style="background-color: #EFEFEF; font-weight: bold;"><td>
Block type
</td>
<td>
Drawer
</td>
<td>
Purpose
</td>
</tr><tr><td><span class="basicblock">PhoneNumberPicker1.AfterPicking</span></td>
<td>PhoneNumberPicker1</td>
<td>The event-handler that is triggered when user chooses from contact list</td>
</tr><tr><td><span class="ai-blocks">add items to list</span></td>
<td>Lists</td>
<td>Your goal is to add chosen number to list </td>
</tr><tr><td><span class="argblock">global PhoneNumbers</span></td>
<td>My Definitions</td>
<td>Plug this into list slot of add items to list</td>
</tr><tr><td><span class="argblock">PhoneNumberPicker1.PhoneNumber </span></td>
<td>PhoneNumberPicker1</td>
<td>This holds the chosen phone number, plug into <b>item</b> slot of <span class="ai-blocks">add items to list</span></td>
</tr><tr><td><span class="callblock">TinyDB1.StoreValue</span></td>
<td>TinyDB1</td>
<td>Since the list is updated, need to update the database</td>
</tr><tr><td><span class="textblock">text</span> ("textGroup")</td>
<td>Text</td>
<td>Plug this in as the <b>tag</b> of <span class="callblock">TinyDB1.StoreValue</span></td>
</tr><tr><td><span class="argblock">global PhoneNumbers</span></td>
<td>My Definitions</td>
<td>Plug this in as the <b>value</b> of <span class="callblock">TinyDB1.StoreValue</span></td>
</tr><tr><td><span class="setblock">set MembersLabel.Text to</span></td>
<td>MembersLabel</td>
<td>Display the list on the phone</td>
</tr><tr><td><span class="argblock">global PhoneNumbers</span></td>
<td>My Definitions</td>
<td>plug into <span class="setblock">set MembersLabel.Text to</span></td>
</tr></table><p>The blocks should look like this:</p>
<p><img src="../sites/all/files/tutorials/textGroup2/addMember.png" /></p>
<h4 class="ai-header">How the Blocks Work</h4>
<p>When the user chooses from the PhoneListPicker, the <span class="basicblock">PhoneListPicker1.AfterPicking</span> event is triggered. A PhoneListPicker' s job is to put the user's choice in its PhoneNumber property, so the event-handler just calls <span class="ai-blocks">add items to list</span> to get that choice into the PhoneNumbers list.</p>
<p>PhoneNumbers is a variable, and variables are short-term memory that will disappear when the app is closed. Thus, after adding the item to the variable, <span class="callblock">TinyDB1.StoreValue</span> block is used to copy that list to the database-- the phone's long-term memory. The data is tagged with "textGroup". Later, you'll use that tag to re-load the phone number list from the database each time the app is opened.</p>
<p>After updating the database, <span class="setblock">set MembersLabel.Text to</span> is called to display the list. This is necessary because list variables are hidden from the user until they are placed in a visible component. Directly placing a list into a label is a rudimentary way of displaying a list-- the list will appear in the form: (111-1111 222-2222). In the next section, you'll program a more elegant list display.</p>
<pre class="ai-testing"><b>Test the behavior.</b> On the phone, click "Add Member" and choose a number from the list of contacts that appears. Does the number appear in the MembersLabel? Try adding additional numbers to see how the list is displayed. </pre><h4 class="ai-header">Displaying the List with Items on Separate Lines</h4>
<p>At this point the app shows the user the phone numbers that have been added, but not very elegantly. Create a procedure <span class="callblock">displayMembers</span>, which displays the list with each phone number on a separate line. Be sure and call the procedure in the <span class="basicblock">PhonePicker1.AfterPicking</span> event, below the <span class="ai-blocks">add items to list</span> block, so that the updated list is displayed. The call to the procedure should replace the blocks that set the MembersLabel.Text directly to the list. For help displaying the list on separate lines, see <a href="../content/displaying-list.html">Displaying a List</a>.</p>
<p>You'll need the following blocks:</p>
<table><tr style="background-color: #EFEFEF; font-weight: bold;"><td>
Block type
</td>
<td>
Drawer
</td>
<td>
Purpose
</td>
</tr><tr><td><span class="callblock">procedure</span> ("displayMembers")</td>
<td>Definitions</td>
<td>Create a procedure as you'll want to call this from multiple places</td>
</tr><tr><td><span class="setblock">set MembersLabel.Text to</span></td>
<td>MembersLabel</td>
<td>Display the list here</td>
</tr><tr><td><span class="textblock">text</span> ("")</td>
<td>Text</td>
<td>Start the text out empty</td>
</tr><tr><td><span class="controlblock">foreach</span></td>
<td>Control</td>
<td>Iterate through the numbers</td>
</tr><tr><td><span class="argblock">name number</span></td>
<td>in the <span class="controlblock">foreach</span></td>
<td>Name the foreach variable "number". This is the current item of the <span class="controlblock">foreach</span></td>
</tr><tr><td><span class="argblock">global PhoneNumbers</span></td>
<td>My Definitions</td>
<td>Plug into in list slot of <span class="controlblock">foreach</span></td>
</tr><tr><td><span class="setblock">set MembersLabel.Text to</span></td>
<td>MembersLabel</td>
<td>Modify with each of the numbers</td>
</tr><tr><td><span class="textblock">make text</span></td>
<td>Text</td>
<td>Build a text object from multiple parts</td>
</tr><tr><td><span class="setblock">MembersLabel.Text</span></td>
<td>MembersLabel</td>
<td>Add to the label on each iteration of <span class="controlblock">foreach</span></td>
</tr><tr><td><span class="textblock">text</span> ("\n")</td>
<td>Text</td>
<td>Newline character so that next number is on next line</td>
</tr><tr><td><span class="argblock">value number</span></td>
<td>My Definitions</td>
<td>The current number from the list</td>
</tr></table><p>Here's how the blocks should look:</p>
<p><img src="../sites/all/files/tutorials/textGroup2/displayMembers.png" /></p>
<h4 class="ai-header">How the Blocks Work</h4>
<p>The <span class="controlblock">foreach</span> in <span class="callblock">displayMembers</span> successively adds a phone number to the end of the label, placing a newline character in between each item.</p>
<p>Of course this procedure will not do anything unless you call it: you should add a call to the procedure in the <span class="basicblock">PhonePicker1.AfterPicking</span> event, below the <span class="ai-blocks">add items to list</span> block. The <span class="callblock">call displayMembers</span> block can be found in My Definitions, and it should replace the blocks that directly set the MembersLabel.Text in the list.</p>
<pre class="ai-testing"><b>Test the behavior.</b> On the phone, click "Add Member" to choose another number to add to the list. When the modified list is displayed, does each number appear on separate lines?</pre><h4 class="ai-header">Removing a Number from the list</h4>
<p>To allow the user to remove a number from the list, you must first get the PhoneNumbers list into the RemoveListPicker that appears when the user clicks "Remove Member". Unlike the PhonePicker component, which gets its data from the phone's contact list, ListPicker requires you to explicilty load the items that will appear. You can do this by setting the Elements property of the ListPicker component. You do this within the <span class="basicblock">RemoveListPicker.BeforePicking</span> event, which is triggered right when the user clicks the button but before the list is shown.</p>
<p>The blocks should look like this:</p>
<p><img src="../sites/all/files/tutorials/textGroup2/BeforePicking.png" /></p>
<p>Next, code the <span class="basicblock">RemoveListPicker.AfterPicking</span> event so that the user's choice is removed from the PhoneNumbers list. You'll need the following blocks:</p>
<table><tr style="background-color: #EFEFEF; font-weight: bold;"><td>
Block type
</td>
<td>
Drawer
</td>
<td>
Purpose
</td>
</tr><tr><td><span class="basicblock">RemoveListPicker.AfterPicking</span></td>
<td>RemoveListPicker</td>
<td>This is triggered after the user chooses a number from the list</td>
</tr><tr><td><span class="ai-blocks">remove list item</span></td>
<td>Lists</td>
<td>Removes the indexth item in a given list</td>
</tr><tr><td><span class="argblock">global PhoneNumbers</span></td>
<td>My Definitions</td>
<td>Plug into list slot of <span class="ai-blocks">remove list item</span></td>
</tr><tr><td><span class="ai-blocks">position in list</span></td>
<td>Lists</td>
<td>Given an item in a list, this gives you its index</td>
</tr><tr><td><span class="argblock">RemoveListPicker.Selection</span></td>
<td>RemoveListPicker</td>
<td>The number chosen by the user, plug into thing slot of <span class="ai-blocks">position in list</span></td>
</tr><tr><td><span class="argblock">global PhoneNumbers</span></td>
<td>My Definitions</td>
<td>Plug into list slot of <span class="ai-blocks">position in list</span></td>
</tr><tr><td><span class="callblock">call displayMembers</span></td>
<td>My Definitions</td>
<td>Once the user removes one, display the modified list</td>
</tr></table><p>The blocks should look like this:</p>
<p><img src="../sites/all/files/tutorials/textGroup2/RemoveAfterPicking.png" /></p>
<h4 class="ai-header">How the Blocks Work</h4>
<p>When the user chooses a number from the RemoveListPicker, the <span class="basicblock">AfterPicking</span> event is triggered. The event-handler uses position in list to get the index of the chosen number, then uses that index to remove the number from the list PhoneNumbers. The database is then updated and the list displayed.</p>
<pre class="ai-testing"><b>Test the behavior.</b> On the phone, click "Remove Member" and choose a number from the list that appears. When the list is re-displayed, is the number you chose gone? </pre><h4 class="ai-header">Loading the List from the Database</h4>
<p>The app so far works, and when changes are made to the PhoneNumbers list they are also stored in a database. Now you just need to add the behavior such that the data stored in the database is loaded when the app launches.</p>
<p>Program the <span class="basicblock">Screen1.Initialize</span> event-handler so that the saved list of phone numbers is retrieved from the database and placed in the PhoneNumbers list and the display is updated to show the list. You'll need to check the retrieved data to make sure there's something there-- after all, the first time the app is used, the database will not have any numbers in it.</p>
<p>You'll need the following blocks:</p>
<table><tr style="background-color: #EFEFEF; font-weight: bold;"><td>
Block type
</td>
<td>
Drawer
</td>
<td>
Purpose
</td>
</tr><tr><td><span class="setblock">def variable</span> ("valueFromDB") </td>
<td>Definitions</td>
<td>A temporary variable to hold the retrieved data</td>
</tr><tr><td><span class="textblock">text</span> (blank)</td>
<td>Text</td>
<td>Initial value for the variable can be anything</td>
</tr><tr><td><span class="basicblock">Screen1.Initialize</span></td>
<td>Screen1</td>
<td>This is triggered when app begins</td>
</tr><tr><td><span class="setblock">set valueFromDB to</span></td>
<td>My Definitions</td>
<td>You'll set the variable to the value retrieved from db</td>
</tr><tr><td><span class="callblock">TinyDB1.GetValue</span></td>
<td>TinyDB1</td>
<td>Get the stored response text from the database</td>
</tr><tr><td><span class="textblock">text</span> ("textGroup")</td>
<td>Text</td>
<td>Plug into tag slot of <span class="callblock">GetValue</span>, make sure text is same as was used in StoreValue above</td>
</tr><tr><td><span class="controlblock">if test</span></td>
<td>Control</td>
<td>To ask if the retrieved value has some text</td>
</tr><tr><td><span class="ai-blocks">is list?</span></td>
<td>Text</td>
<td>Check if the data returned is a list (if no data is returned, this will be false)</td>
</tr><tr><td><span class="">global valueFromDB</span> (x2)</td>
<td>My Definitions</td>
<td>This variable holds the value retrieved from <span class="calblock">GetValue</span></td>
</tr><tr><td><span class="setblock">set PhoneNumbers to</span></td>
<td>PhoneNumbers</td>
<td>If we retrieved something, place it in PhoneNumbers</td>
</tr></table><p>The blocks should look like this:</p>
<p><img src="../sites/all/files/tutorials/textGroup2/screenInit.png" /></p>
<h4 class="ai-header">How the Blocks Work</h4>
<p>When the app begins, the <span class="basicblock">Screen1.Initialize</span> event is triggered. The event-handler queries the database with GetValue and the tag "textGroup". If there is a value with that tag in the database, its corresponding value will be placed in the variable valueFromDB. The event-handler checks this value-- is it a list?-- and if it is puts the list into the variable PhoneNumbers and calls displayMembers.</p>
<pre class="ai-testing"><b>Test the app.</b> To test the final app, first package and install it on the phone and run it. Live testing won't work in this case because every time you "Restart App", in clears the phone's database: even if you've stored some data persistently, it is cleared when you restart the app. 

Click Restart App so that the app re-initializes. Does the list of numbers you've entered appear on reload? Try removing all items and testing again. Does the app launch without error?</pre><h4 class="ai-header">Text Group Part II, Final Program</h4>
<p><img src="../sites/all/files/tutorials/textGroup2/textGroup2final.png" /></p>
<h4 class="ai-header">Variations</h4>
<p>Once you get the Text Group app working, you might want to explore some variations. For example,</p>
<ul><li>Write a version that records both the contact name and phone number of each member of the group. You can also use ContactPicker to let the user choose from a contact name instead of a number.</li>
<li>Write a version that allows the user to define and make use of multiple groups. You'll need a group list in which each item is a list of contacts/numbers, and you'll need a more complex user interface. </li>
</ul><h4 class="ai-header">Review</h4>
<p>Here are some of the ideas covered in this tutorial:</p>
<ul><li>PhoneListPicker allow the user to choose from the phone numbers of his contacts. The choice is placed in the Selection property and the AfterPicking event is called when the user makes a choice.</li>
<li>ListPicker is similar to PhoneListPicker but it displays a programmer-defined list, e.g., the list of phone numbers in the group. You define the list that will appear in the ListPicker by setting the Elements property, and you can do this in the BeforePicking event. The user's choice is placed in the Selection property, and the AfterPicking event is triggered when the user makes a choice.</li>
<li>TinyDB is used to store data persistently so that it can be loaded each time an app begins. StoreValue stores with a tag to identify the data and the data itself (the value). GetValue returns the data for a given tag. Often, an app will call GetValue when the app begins (Screen1.Initialize) to load the persistent data.</li>
<li>Currently, App Inventor does not provide full access and functionality for the contacts and groups of the phone. In this tutorial, you created your own group and app for processing the group (adding,removing, and texting all).</li>
</ul><h4 class="ai-header">Scan the Sample App to your Phone</h4>
<p>Scan the following barcode onto your phone to install and run the sample app.</p>
<p><img src="../sites/all/files/tutorials/textGroup2/textgroup2barcode.png" /></p>
<p>Or <a href="../sites/all/files/tutorials/textGroup2/textgroup2.apk">download the apk</a></p>
<p>.</p>
<h4 class="ai-header">Download Source Code</h4>
<p>If you'd like to work with this sample in App Inventor, <a href="../sites/all/files/tutorials/textGroup2/textgroup2.zip">download the source code</a> to your computer, then open App Inventor, go to the My Projects page, and choose <b>More Actions | Upload Source</b>.</p>
<pre class="ai-box">MIT and Google are grateful to <a href="http://www.appinventor.org/">Professor David Wolber</a>, CS Professor at The University of San Francisco, for developing this tutorial.

Done with <span style="color:black;">TextGroup Part 2</span>? Return to the other tutorials <a href="../content/tutorials.html">here</a>.</pre></div></div></div><section class="field field-name-field-version field-type-taxonomy-term-reference field-label-above view-mode-full clearfix">

      <h2 class="field-label">Tutorial Version:&nbsp;</h2>
  
  <ul class="field-items">

    
      <li class="field-item even">
        <a href="../tutorial-version/app-inventor-1.html" typeof="skos:Concept" property="rdfs:label skos:prefLabel" datatype="">App Inventor 1</a>      </li>

    
  </ul>

</section>
<section class="field field-name-field-tutorial-difficulty field-type-taxonomy-term-reference field-label-above view-mode-full clearfix">

      <h2 class="field-label">Tutorial Difficulty:&nbsp;</h2>
  
  <ul class="field-items">

    
      <li class="field-item even">
        <a href="../tutorial-difficulty/advanced.html" typeof="skos:Concept" property="rdfs:label skos:prefLabel" datatype="">Advanced</a>      </li>

    
  </ul>

</section>
<section class="field field-name-field-tutorial-type field-type-taxonomy-term-reference field-label-above view-mode-full clearfix">

      <h2 class="field-label">Tutorial Type:&nbsp;</h2>
  
  <ul class="field-items">

    
      <li class="field-item even">
        <a href="../tutorial-type/sms-texting.html" typeof="skos:Concept" property="rdfs:label skos:prefLabel" datatype="">SMS Texting</a>      </li>

    
  </ul>

</section>
  </div>

  
  
</article>
    </div>
  </div>
</div>
  </div>
</div>

        
      </section>

      
    </div></div>

          <div class="region region-sidebar-second sidebar">
    <div id="block-block-16" class="block block-block block-odd block-count-3 block-region-sidebar-second">
  <div class="block-inner clearfix">
                <div class="block-content content no-title">
      <a href="http://appinventor.mit.edu/explore/"><img alt="MIT App Inventor" title="MIT App Inventor" src="../sites/all/files/explore_images/appinventor_logo_sm.png" /></a><img alt="Center for Mobile Learning" title="Center for Mobile Learning" src="../sites/all/files/explore_images/cml_logo_sm.png" id="cml_logo_back"/>    </div>
  </div>
</div>
<div id="block-block-1" class="block block-block block-even block-count-4 block-region-sidebar-second">
  <div class="block-inner clearfix">
                <div class="block-content content no-title">
      <p align="center"><a href="http://beta.appinventor.mit.edu/"><img src="../sites/all/files/inventButton.png" alt="Use MIT App Inventor" width="77%" /></a></p>
<p>All you need to get started with MIT App Inventor is a Google account to log in.</p>
    </div>
  </div>
</div>
<div id="block-block-7" class="block block-block block-odd block-count-5 block-region-sidebar-second">
  <div class="block-inner clearfix">
                <div class="block-content content no-title">
      <!-- Place this tag where you want the search box to render -->
<gcse:searchbox-only queryParameterName="term"></gcse:searchbox-only>    </div>
  </div>
</div>
  </div>
    
  </div></div>

      <footer role="contentinfo">
              <div class="region region-footer">
    <div id="block-block-3" class="block block-block block-odd block-count-6 block-region-footer">
  <div class="block-inner clearfix">
                <div class="block-content content no-title">
      <p style="text-align: center;"><a rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/"><img alt="Creative Commons License" src="http://i.creativecommons.org/l/by-sa/3.0/88x31.png" /></a> <br />
This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/">Creative Commons Attribution-ShareAlike 3.0 Unported License</a></p>
<p style="text-align: center;">© 2012-2013 <a href="http://web.mit.edu/">Massachusetts Institute of Technology</a></p>
<p style="text-align: center;"><a href="../contact.html">Contact Us</a></p>
    </div>
  </div>
</div>
  </div>
    </footer>
  
</div>

  </body>

<!-- Mirrored from explore.appinventor.mit.edu/node/316 by HTTrack Website Copier/3.x [XR&CO'2010], Thu, 27 Jun 2013 19:40:03 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8"><!-- /Added by HTTrack -->
</html>
