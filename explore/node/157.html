<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML+RDFa 1.0//EN"
  "http://www.w3.org/MarkUp/DTD/xhtml-rdfa-1.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" version="XHTML+RDFa 1.0" dir="ltr"
  xmlns:content="http://purl.org/rss/1.0/modules/content/"
  xmlns:dc="http://purl.org/dc/terms/"
  xmlns:foaf="http://xmlns.com/foaf/0.1/"
  xmlns:og="http://ogp.me/ns#"
  xmlns:rdfs="http://www.w3.org/2000/01/rdf-schema#"
  xmlns:sioc="http://rdfs.org/sioc/ns#"
  xmlns:sioct="http://rdfs.org/sioc/types#"
  xmlns:skos="http://www.w3.org/2004/02/skos/core#"
  xmlns:xsd="http://www.w3.org/2001/XMLSchema#">

<head profile="http://www.w3.org/1999/xhtml/vocab">
  <meta charset="utf-8" />
<meta about="/content/pizzaparty" property="sioc:num_replies" content="0" datatype="xsd:integer" />
<link rel="shortcut icon" href="../sites/explore.appinventor.mit.edu/files/MIT_App_Inventor_favicon_0.png" type="image/png" />
<meta content="Pizza Party with Fusion Tables" about="/content/pizzaparty" property="dc:title" />
<link rel="shortlink" href="157.html" />
<meta name="Generator" content="Drupal 7 (http://drupal.org)" />
<link rel="canonical" href="../content/pizzaparty.html" />
  <title>Pizza Party with Fusion Tables | Explore MIT App Inventor</title>
  <style>@import url("../modules/system/system.baseaa80.css?md8m2v");
@import url("../modules/system/system.menusaa80.css?md8m2v");
@import url("../modules/system/system.messagesaa80.css?md8m2v");
@import url("../modules/system/system.themeaa80.css?md8m2v");</style>
<style>@import url("../modules/comment/commentaa80.css?md8m2v");
@import url("../modules/field/theme/fieldaa80.css?md8m2v");
@import url("../modules/node/nodeaa80.css?md8m2v");
@import url("../modules/search/searchaa80.css?md8m2v");
@import url("../modules/user/useraa80.css?md8m2v");
@import url("../sites/all/modules/views/css/viewsaa80.css?md8m2v");</style>
<style>@import url("../sites/all/modules/ctools/css/ctoolsaa80.css?md8m2v");
@import url("../sites/all/modules/panels/css/panelsaa80.css?md8m2v");
@import url("../sites/all/modules/extlink/extlinkaa80.css?md8m2v");</style>
<style>@import url("../sites/all/themes/adaptivetheme/adaptivetheme/css/at.baseaa80.css?md8m2v");
@import url("../sites/all/themes/adaptivetheme/adaptivetheme/css/at.layoutaa80.css?md8m2v");
@import url("../sites/all/themes/adaptivetheme/adaptivetheme/css/at.messagesaa80.css?md8m2v");
@import url("../sites/all/themes/sky/css/html-elementsaa80.css?md8m2v");
@import url("../sites/all/themes/sky/css/formsaa80.css?md8m2v");
@import url("../sites/all/themes/sky/css/tablesaa80.css?md8m2v");
@import url("../sites/all/themes/sky/css/pageaa80.css?md8m2v");
@import url("../sites/all/themes/sky/css/articlesaa80.css?md8m2v");
@import url("../sites/all/themes/sky/css/commentsaa80.css?md8m2v");
@import url("../sites/all/themes/sky/css/fieldsaa80.css?md8m2v");
@import url("../sites/all/themes/sky/css/blocksaa80.css?md8m2v");
@import url("../sites/all/themes/sky/css/navigationaa80.css?md8m2v");
@import url("../sites/explore.appinventor.mit.edu/files/color/modtheme-bdf3989c/colorsaa80.css?md8m2v");
@import url("../sites/all/themes/sky/css/sky.settings.styleaa80.css?md8m2v");
@import url("../sites/all/themes/modtheme/css/modthemeaa80.css?md8m2v");</style>
<style media="print">@import url("../sites/all/themes/sky/css/printaa80.css?md8m2v");</style>
<link type="text/css" rel="stylesheet" href="../sites/all/themes/sky/css/sky.responsive.styleaa80.css?md8m2v" media="all" />
<link type="text/css" rel="stylesheet" href="../sites/all/themes/sky/css/sky.responsive.gpanelsaa80.css?md8m2v" media="all" />
<link type="text/css" rel="stylesheet" href="../sites/all/themes/modtheme/css/modtheme.responsive.styleaa80.css?md8m2v" media="all" />
<link type="text/css" rel="stylesheet" href="../sites/all/themes/modtheme/css/modtheme.responsive.gpanelsaa80.css?md8m2v" media="all" />
<link type="text/css" rel="stylesheet" href="../sites/explore.appinventor.mit.edu/files/at_css/modtheme.responsive.layoutaa80.css?md8m2v" media="all" />

<!--[if lt IE 9]>
<link type="text/css" rel="stylesheet" href="http://explore.appinventor.mit.edu/sites/explore.appinventor.mit.edu/files/at_css/modtheme.lt-ie9.layout.css?md8m2v" media="all" />
<![endif]-->
  <script src="../misc/jquery1cc4.js?v=1.4.4"></script>
<script src="../misc/jquery.once7839.js?v=1.2"></script>
<script src="../misc/drupalaa80.js?md8m2v"></script>
<script src="../sites/all/modules/admin_menu/admin_devel/admin_develaa80.js?md8m2v"></script>
<script src="../sites/all/modules/panels/js/panelsaa80.js?md8m2v"></script>
<script src="../sites/all/modules/extlink/extlinkaa80.js?md8m2v"></script>
<script src="../sites/all/modules/google_analytics/googleanalyticsaa80.js?md8m2v"></script>
<script>var _gaq = _gaq || [];_gaq.push(["_setAccount", "UA-31803258-1"]);_gaq.push(["_trackPageview"]);(function() {var ga = document.createElement("script");ga.type = "text/javascript";ga.async = true;ga.src = ("https:" == document.location.protocol ? "https://ssl" : "http://www") + ".google-analytics.com/ga.js";var s = document.getElementsByTagName("script")[0];s.parentNode.insertBefore(ga, s);})();</script>
<script src="../sites/all/themes/sky/js/scriptsaa80.js?md8m2v"></script>
<script>jQuery.extend(Drupal.settings, {"basePath":"\/","pathPrefix":"","ajaxPageState":{"theme":"modtheme","theme_token":"lGbywc9kNt7cc3ixnwU9t88gpuxt3AUzc4_Wme6ZtmA","js":{"misc\/jquery.js":1,"misc\/jquery.once.js":1,"misc\/drupal.js":1,"sites\/all\/modules\/admin_menu\/admin_devel\/admin_devel.js":1,"sites\/all\/modules\/panels\/js\/panels.js":1,"sites\/all\/modules\/extlink\/extlink.js":1,"sites\/all\/modules\/google_analytics\/googleanalytics.js":1,"0":1,"sites\/all\/themes\/sky\/js\/scripts.js":1},"css":{"modules\/system\/system.base.css":1,"modules\/system\/system.menus.css":1,"modules\/system\/system.messages.css":1,"modules\/system\/system.theme.css":1,"modules\/comment\/comment.css":1,"modules\/field\/theme\/field.css":1,"modules\/node\/node.css":1,"modules\/search\/search.css":1,"modules\/user\/user.css":1,"sites\/all\/modules\/views\/css\/views.css":1,"sites\/all\/modules\/ctools\/css\/ctools.css":1,"sites\/all\/modules\/panels\/css\/panels.css":1,"sites\/all\/modules\/extlink\/extlink.css":1,"sites\/all\/themes\/adaptivetheme\/adaptivetheme\/css\/at.base.css":1,"sites\/all\/themes\/adaptivetheme\/adaptivetheme\/css\/at.layout.css":1,"sites\/all\/themes\/adaptivetheme\/adaptivetheme\/css\/at.messages.css":1,"sites\/all\/themes\/sky\/css\/html-elements.css":1,"sites\/all\/themes\/sky\/css\/forms.css":1,"sites\/all\/themes\/sky\/css\/tables.css":1,"sites\/all\/themes\/sky\/css\/page.css":1,"sites\/all\/themes\/sky\/css\/articles.css":1,"sites\/all\/themes\/sky\/css\/comments.css":1,"sites\/all\/themes\/sky\/css\/fields.css":1,"sites\/all\/themes\/sky\/css\/blocks.css":1,"sites\/all\/themes\/sky\/css\/navigation.css":1,"sites\/all\/themes\/modtheme\/color\/colors.css":1,"sites\/all\/themes\/sky\/css\/sky.settings.style.css":1,"sites\/all\/themes\/modtheme\/css\/modtheme.css":1,"sites\/all\/themes\/sky\/css\/print.css":1,"sites\/all\/themes\/sky\/css\/sky.responsive.style.css":1,"sites\/all\/themes\/sky\/css\/sky.responsive.gpanels.css":1,"sites\/all\/themes\/modtheme\/css\/modtheme.responsive.style.css":1,"sites\/all\/themes\/modtheme\/css\/modtheme.responsive.gpanels.css":1,"public:\/\/at_css\/modtheme.responsive.layout.css":1,"public:\/\/at_css\/modtheme.lt-ie9.layout.css":1}},"extlink":{"extTarget":"_blank","extClass":"ext","extSubdomains":1,"extExclude":"","extInclude":"","extAlert":0,"extAlertText":"This link will take you to an external web site. We are not responsible for their content.","mailtoClass":"mailto"},"googleanalytics":{"trackOutbound":1,"trackMailto":1,"trackDownload":1,"trackDownloadExtensions":"7z|aac|arc|arj|asf|asx|avi|bin|csv|doc|exe|flv|gif|gz|gzip|hqx|jar|jpe?g|js|mp(2|3|4|e?g)|mov(ie)?|msi|msp|pdf|phps|png|ppt|qtm?|ra(m|r)?|sea|sit|tar|tgz|torrent|txt|wav|wma|wmv|wpd|xls|xml|z|zip"}});</script>
<!-- Put the following javascript before the closing </head> tag. -->
<script>
  (function() {
    var cx = '009943970440830858880:hxy3yq9wtr0';
    var gcse = document.createElement('script'); gcse.type = 'text/javascript'; gcse.async = true;
    gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
        '//www.google.com/cse/cse.js?cx=' + cx;
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(gcse, s);
  })();
</script>
</head>
<body class="html not-front not-logged-in one-sidebar sidebar-second page-node page-node- page-node-157 page-type-page site-name-explore-mit-app-inventor section-content site-name-hidden color-scheme-custom modtheme gecko win fs-small bs-n bb-n mb-dd rc-0 rct-8 ia-r bf-l snf-a ssf-a ptf-a ntf-a ctf-a btf-a" >
  <div id="skip-link">
    <a href="#main-content" class="element-invisible element-focusable">Skip to main content</a>
  </div>
    <div id="page" class="container">

  
  <header class="clearfix" role="banner">
        <div id="cml_logo"><a href="http://mobilelearning.mit.edu/" title="CML Home Page"><img src="../sites/explore.appinventor.mit.edu/files/cml_logo.png" alt="MIT Center for Mobile Learning"></a>
        </div>

    <div id="branding">
              <hgroup class="element-invisible">
                      <h1 id="site-name" class="element-invisible"><a href="../index-2.html" title="Home page">Explore MIT App Inventor</a></h1>
                            </hgroup>
                    <div id="logo"><a href="../index-2.html" title="Home page"><img src="../sites/explore.appinventor.mit.edu/files/MIT_app_inventor_explore_logo_big_0_0.png" alt="Explore MIT App Inventor logo"/></a></div>
          </div>

          <div id="menu-bar" class="nav clearfix">
      <nav id="block-system-main-menu" class="block block-system block-menu block-odd block-count-1 block-region-menu-bar menu-wrapper clearfix">
              <h2 class="block-title element-invisible element-invisible">Main menu</h2>
            <ul class="menu clearfix"><li class="first collapsed menu-item-218"><a href="../index-2.html" title="Explore MIT App Inventor Home Page">Home</a></li><li class="leaf menu-item-686"><a href="../blog.html" title="Blog from the MIT App Inventor Team">Blog</a></li><li class="collapsed menu-item-525"><a href="../learn.html" title="Learn about MIT App Inventor">Learn</a></li><li class="leaf menu-item-432"><a href="http://beta.appinventor.mit.edu/forum/index.html" title="MIT App Inventor forums">Forum</a></li><li class="collapsed menu-item-438"><a href="../stories.html" title="Stories about Users&#039; Successes with MIT App Inventor">Stories</a></li><li class="last leaf menu-item-527"><a href="../invent.html" title="Find out how to start using App Inventor">Invent</a></li></ul>  </nav>
  </div>

  </header>

  <div id="columns"class="no-menu-bar"><div class="columns-inner clearfix">

            
    
    <div id="content-column"><div class="content-inner">

      
            <section id="main-content" role="main">

                        
        
        <div id="content">  <div class="region region-content">
    <div id="block-system-main" class="block block-system block-odd block-count-2 block-region-content">
  <div class="block-inner clearfix">
                <div class="block-content content no-title">
      <article id="article-157" class="article article-type-page odd article-full clearfix" about="/content/pizzaparty" typeof="foaf:Document" role="article">

  
        <header class="clearfix">

      
              <h1 property="dc:title" datatype="" class="article-title">
                      Pizza Party with Fusion Tables                  </h1>
      
      
    </header>
    
  <div class="article-content">
  <div class="field field-name-body field-type-text-with-summary field-label-hidden view-mode-full"><div class="field-items"><div class="field-item even" property="content:encoded"><style>
<!--/*--><![CDATA[/* ><!--*/

li {
padding-bottom: 7px;
}

.basicblock {
border: 1px dashed #7AA81C;
padding-left: 4px;
padding-right: 4px;
padding-top: 1px;
padding-bottom: 1px;
background-color: #E7F2CB;
font-size: 9pt;
text-wrap: suppress;

}

.callblock {
border: 1px dashed #000000;
padding-left: 4px;
padding-right: 4px;
padding-top: 1px;
padding-bottom: 1px;
background-color: #E0D1FF;
font-size: 9pt;
text-wrap: suppress;

}

.argblock {
border: 1px dashed #000000;
padding-left: 4px;
padding-right: 4px;
padding-top: 1px;
padding-bottom: 1px;
background-color: #E5E5FF;
font-size: 9pt;
text-wrap: suppress;

}

.textblock {
border: 1px dashed #000000;
padding-left: 4px;
padding-right: 4px;
padding-top: 1px;
padding-bottom: 1px;
background-color: #FADAA0;
font-size: 9pt;
text-wrap: suppress;

}

.setblock {
border: 1px dashed #000000;
padding-left: 4px;
padding-right: 4px;
padding-top: 1px;
padding-bottom: 1px;
background-color: #C1D5F8;
font-size: 9pt;
text-wrap: suppress;
}

.controlblock {
border: 1px dashed #000000;
padding-left: 4px;
padding-right: 4px;
padding-top: 1px;
padding-bottom: 1px;
background-color: #FAEDBB;
font-size: 9pt;
text-wrap: suppress;
}

/*--><!]]>*/
</style><h2 class="ai-header"><span style="color:green;">Pizza Party</span>: Using Google Fusion Tables</h2>
<p>This tutorial shows you how to use Google Fusion Tables to gather, share, and visualize data among a group. All of the data are stored in a public table that can be accessed via Google Drive, and allows different users* to add information to the tables. Coupled with a location sensor, an app could post periodic updates of each user's location to a public fusion table. Users could post notes to mark noteworthy locations, which may be useful for a team of researchers. For example, the app might be used by a team of botanists to create an annotated catalog of the trees (or some invasive plant) within a certain geographical area.</p>
<p>*Note: To share a FusionTable with others, you have to invite each person individually, the same way you would share a private google doc. There is no way to share write privileges to a FusionTable with the public. Public access is restricted to read-only.</p>
<p>In this simple app, you will create a Fusion Table to collect eating preferences for a pizza party. App users can input their eating preferences as well as any notes they have, including attendance, eating restrictions, or other special notes. Fusion Tables are ideal for this because the data are contained in one easy to access place!</p>
<p>This tutorial introduces:</p>
<ul><li>Using the <b>FusionTables</b> component</li>
<li>Using a <b>WebViewer</b> component</li>
</ul><p>This tutorial assumes you are familiar with the basics of App Inventor-- using the Component Designer to build a user interface, and using the Blocks Editor to specify the app's behavior. If you are not familiar with the basics, try stepping through some of the <a href="http://appinventor.mit.edu/explore/content/tutorials.html">basic tutorials</a> before continuing.</p>
<p>Here is the screen for the Pizza Party app with some stored values: </p>
<p><img src="../sites/explore.appinventor.mit.edu/files/screenshot.PNG" /></p>
<h4 class="ai-header">Before You Begin: Working with Fusion Tables</h4>
<p>A <a href="http://en.wikipedia.org/wiki/Google_Fusion_Tables">Fusion Table</a> is a Google service to support the gathering, managing, sharing, and visualizing of data. Data are stored in multiple tables on Google's <a href="http://en.wikipedia.org/wiki/Cloud_computing">cloud</a>. Individual tables can be merged (or fused) if they contain a common column. and they can be easily visualized on maps and in various kinds of charts and graphs. In addition, they can easily be published to the Web.</p>
<p>To familiarize yourself with fusion tables, have a look around the <a href="http://support.google.com/fusiontables/bin/answer.py?hl=en&amp;answer=2571232">Fusion Tables Web Site</a>. Check out the example gallery to see what kinds of things are possible. Work through this <a href="http://earth.google.com/outreach/tutorial_fusion_sample.html">Fusion Table tutorial</a>, which shows how import some data, create a Fusion Table, and view the data on a map with your browser. You'll need to log in with your Google account.</p>
<h4 class="ai-header">Creating your own Fusion Tables</h4>
<p>You will probably want to create your own Fusion Tables to experiment with as you are developing your apps. This is as easy as creating a Google document, if you are familiar with that process. Here are the steps:</p>
<ol><li>On the web, login to your Gmail account or any other Google service (e.g., Drive, YouTube).</li>
<li>Select the More &gt; Even more menu and scroll to the bottom of the page of Google services where you will find the Fusion Tables service.</li>
<li>You may want to view some of the examples and work through a tutorial to learn the basics.</li>
<li>If you wish to create a new table, go to Google Drive. Use the Create Button, go to More &gt; Fusion Table. You will be given an option to create a new table, load a table from your Google Drive, or upload a table from your computer. For the purposes of this tutorial, select <b>Create Empty Table</b>.</li>
<li>Edit the column names to something meaningful by going to Edit &gt; Change Columns. In this tutorial, we are using 5 columns, named Date, Name, Pizza, Drink, and Comment.</li>
<li>Click on the Share button (top right) to modify the table's permissions.</li>
</ol><h4 class="ai-header">Getting an API Key</h4>
<p>In order to use the FusiontablesControl Component you need to acquire a Google a Google Applications Programming Interface (API) key, an API Key. To get an API key, follow these instructions:</p>
<ol><li>Go to your <a href="https://code.google.com/apis/console/">Google APIs Console</a> and login if necessary.</li>
<li>Select the Services item from the menu on the left.</li>
<li>Choose the Fusion Tables service from the list provided and turn it on.</li>
<li>Go back to the main menu and select the API Access item.</li>
</ol><p>Your API Key will be at the bottom of that pane in the section called "Simple API Access". You will provide your key as the value to the ApiKey property in all your Fusiontables apps.</p>
<h4 class="ai-header">Building the App</h4>
<p>Connect to the App Inventor web site and start a new project. Name the new project PizzaParty, set the screen's orientation to Portrait and uncheck the Screen's scrollable property. You may also wish to set the Screen's Title property to something other than 'Screen 1'.</p>
<h4 class="ai-header">The User Interface</h4>
<p>In addition to the FusiontablesControl component, the Pizza Party app makes use of several other types of components. It is assumed that you have learned how to use these in previous lessons. Use the component designer to create the interface for the Search Party. When completed, the designer should look like this:</p>
<p><img src="../sites/explore.appinventor.mit.edu/files/designer.PNG" /></p>
<p>The components are: </p>
<table><tr style="background-color: #EFEFEF; font-weight: bold;"><td>
Component Type
</td>
<td>
Palette Group
</td>
<td>
What you'll name it
</td>
<td>
Purpose of Component
</td>
</tr><tr><td>
<b>Label</b>
</td>
<td>Basic</td>
<td style="color:green;">LabelName</td>
<td>Shows the text "Your Name:"</td>
</tr><tr><td>
<b>TextBox</b>
</td>
<td>Basic</td>
<td style="color:green;">TextBoxUserName</td>
<td>Gets input from user</td>
</tr><tr><td>
<b>ListPicker</b>
</td>
<td>Basic</td>
<td style="color:green;">ListPickerPizza</td>
<td>Accesses the list of available pizza flavors</td>
</tr><tr><td>
<b>ListPicker</b>
</td>
<td>Basic</td>
<td style="color:green;">ListPickerDrink</td>
<td>Accesses the list of available drinks.</td>
</tr><tr><td>
<b>Label</b>
</td>
<td>Basic</td>
<td style="color:green;">LabelComment</td>
<td>Shows the text "Comments:"</td>
</tr><tr><td>
<b>TextBox</b>
</td>
<td>Basic</td>
<td style="color:green;">TextBoxComments</td>
<td>Takes user input</td>
</tr><tr><td>
<b>Button</b>
</td>
<td>Basic</td>
<td style="color:green;">ButtonSubmit</td>
<td>Adds new data to the public fusion table</td>
</tr><tr><td>
<b>WebViewer</b>
</td>
<td>Not ready for prime time</td>
<td style="color:green;">WebViewer1</td>
<td>
<p>Displays Fusion Table</p>
<p>Set the HomeUrl to FusionTable URL</p>
</td>
</tr><tr><td>
<b>FusiontablesControl</b>
</td>
<td>Not ready for prime time</td>
<td style="color:green;">FusiontablesControl1</td>
<td>Manages interactions with the app's Fusion Table</td>
</tr><tr><td>
<b>Clock</b>
</td>
<td>Basic</td>
<td style="color:green;">Clock1</td>
<td>Retrieves a timestamp each time a point is posted.</td>
</tr><tr><td>
<b>Notifier</b>
</td>
<td>Other stuff</td>
<td style="color:green;">Notifier1</td>
<td>Notifies to user of any errors</td>
</tr></table><p>For all visible components, set their width property to Fill Parent. Set the WebViewer's height property to Fill Parent.</p>
<p>You must set the WebViewer HomeURL to point to the URL of your table. To find this URL::</p>
<li>Go to <b>Tools</b>, then <b>Publish</b></li>
<li>Copy the URL in the field <b>Send a link in email or IM</b></li>
<h4 class="ai-header">Blocks Editor</h4>
<p>Open the Blocks Editor so you can program the app's behavior. First, you will describe the app's variables. Variable whose names are ALL_CAPS are constants -- that is, variables whose values do not change during the program. Define the following variables and give them the initial values shown in the table.</p>
<table><tr style="background-color: #EFEFEF; font-weight: bold;"><td>
Variable Name
</td>
<td>
Initial Value
</td>
<td>
Purpose
</td>
</tr><tr><td>
<b>TABLE_ID</b>
</td>
<td>Your table ID (e.g. 15_8EiexlH-gLbB4djRzC1fMWhSnbCKQcQNRwutU)</td>
<td>A default value to use for the table. </td>
</tr><tr><td>
<b>tableId</b>
</td>
<td>text</td>
<td>The current table's Id as input by the user.</td>
</tr><tr><td>
<b>timeStamp</b>
</td>
<td>text</td>
<td>Records the time at which the user responded.</td>
</tr><tr><td>
<b>UserName</b>
</td>
<td>text</td>
<td>Records the name of the user.</td>
</tr><tr><td>
<b>pizza</b>
</td>
<td>text</td>
<td>Stores the pizza choice input by the user.</td>
</tr><tr><td>
<b>drink</b>
</td>
<td>text</td>
<td>Stores the drink choice input by the user.</td>
</tr><tr><td>
<b>comment</b>
</td>
<td>text</td>
<td>Stores the comment input by the user.</td>
</tr></table><p>How to get the ID of your table: Each Fusion Table that you create will have a different Table ID. You can find this ID by opening your table, which can be accessed via Google Drive. The TableID can be seen in the navigation bar and is everything appearing after "docid=" in the URL</p>
<p><b>Initializing the App</b></p>
<p>It is important to perform some intialization steps whenever the app is restarted. These are done in the <span class="basicblock">Screen1.Initialize</span> block:</p>
<p><img src="../sites/explore.appinventor.mit.edu/files/initializeblock.PNG" /></p>
<p>For this app we need to set the initial value of the tableId and we tell the app to forget the user's login credentials. This will force the user to login to their Google account and give permission to the app to access the Fusion Table. This authentication step will happen only once when the app first tries to access the Fusion Table. The Initialize block also called the <span class="callblock">resetForm</span> procedure, which will be explained later.</p>
<p><b>List Picker Blocks</b></p>
<p>In the designer, you can set the choices for the pizza and drink types. Using ListPicker, the user can make their selection. This selection will be displayed on the user interface and stored in the pizza and drink variables.</p>
<p><img src="../sites/explore.appinventor.mit.edu/files/listpicker.PNG" /></p>
<p><b>Submitting Data</b><br /></p><p></p>
<p>Once the user has input their name, food choices, and comments, they can select the <b>Submit</b> button. One clicked, the app tests to make sure all of the fields have values in them, and prompts the user to input all values if any are missing. If all values are present, it calls the procedure <span class="callblock">InsertDatainTable</span>. The blocks for the <span class="basicblock">ButtonSubmit.Click</span> are shown here:</p>
<p><img src="../sites/explore.appinventor.mit.edu/files/submit.PNG" /></p>
<p><b>Inserting Points into the Fusion Table</b></p>
<p>The FusiontablesControl component is used to send the point to the Fusion Table. This action will create a new row in the Fusion Table, setting the values of the various columns involved. App Inventor makes this easy to do, but you have to be careful here that the insert query is formatted correctly.</p>
<p>This procedure involves two steps: (1) constructing the insert query and then (2) sending the query to Google's Fusion Table service. The query we want to send will take this format:</p>
<p>INSERT INTO<br /><tableid> (<column1>, <column2>, ...) VALUES (<value1>, <value2>, ...)</value2></value1></column2></column1></tableid></p>
<p>The words in CAPS are part of the query's syntax. The words in <angle brackets=""> are values that we need to plug in. First there is a list of <column names=""> followed by VALUES followed by a list of <value names="">. The order of the column names and value names must coincide. A specific example might be as follows. Notice that the values must be in quotes:</value></column></angle></p>
<p>INSERT INTO 191GHtZ_B2 (Name, Date) VALUES ('Sam', '10/10/2012')</p>
<p>To construct this kind of query we use App Inventor's make text block:</p>
<p><img src="../sites/explore.appinventor.mit.edu/files/insertdataintable.PNG" /></p>
<p>For this app, the column names must match the column names of the table we created earlier (with columns Date, Name, Pizza, Drink, Comment). Their respective values are taken from the procedure's global variables.</p>
<p>Note how we use the <span class="callblock">quotify</span> procedure to place quotes around all of the values in the query:</p>
<p><img src="../sites/explore.appinventor.mit.edu/files/quotifyblocks.PNG" /></p>
<p>Don't forget the FusiontablesControl.SendQuery command at the very end of this procedure. It's small in size compared to rest of the procedure, but very important.</p>
<p><b>Handling the Response from the Fusion Tables Service</b></p>
<p>The <span class="basicblock">FusiontablesControl.GotResult</span> event will be fired when the app receives a response from Google's Fusion Tables Service. For an insert query the service will return the rowId of the new row that was inserted or an error message if something went wrong. In this simple example, we check that the rowId was received and then just invoke the <span class="callblock">WebViewer.GotoUrl</span> procedure, passing it the URL of the fusion table, which we found above. Simply setting the value of a Home page will cause the WebViewer to load and display that page.</p>
<p><img src="../sites/explore.appinventor.mit.edu/files/fusiontablescontrol.PNG" /></p>
<p>Note that this set of blocks also calls the <span class="callblock">resetForm</span> procedure. After recording an entry, it resets the interface back to the original state as shown here:</p>
<p><img src="../sites/explore.appinventor.mit.edu/files/resetformblocks.PNG" /></p>
<p><b>You're done!</b> Package the app by going to <b>Package for Phone</b> on the Designer. You can now test the App for the purposes of the pizza party. Make new Fusion Tables and try to use the app to collect different data from users. Remember, you have to give each user permission to access the Fusion Table. You do this through the Google Fusion Tables interface, not through App Inventor.</p>
<h4 class="ai-header">Variations</h4>
<p>Now that you have a simple app that uses fusion tables and a webviewer working, you might want to build some variations. For example:</p>
<ul><li>Include a <b>LocationSensor</b> so that the user's location can be added to the Fusion Table to create a map with notes</li>
<li>Make the WebViewer display something other than the table of stored values; perhaps a map or a chart</li>
</ul><pre class="ai-box">Done with <span style="color:black;">PizzaParty</span>? Return to the other tutorials <a href="../content/tutorials.html">here</a>.</pre></div></div></div>  </div>

  
  
</article>
    </div>
  </div>
</div>
  </div>
</div>

        
      </section>

      
    </div></div>

          <div class="region region-sidebar-second sidebar">
    <div id="block-block-1" class="block block-block block-odd block-count-3 block-region-sidebar-second">
  <div class="block-inner clearfix">
                <div class="block-content content no-title">
      <p><a href="http://beta.appinventor.mit.edu/"><img src="../sites/explore.appinventor.mit.edu/files/use_mit_app_inventor_button.png" alt="Use MIT App Inventor" /></a></p>
<p>All you need to get started with MIT App Inventor is a Google account to log in.</p>
    </div>
  </div>
</div>
<div id="block-block-4" class="block block-block block-even block-count-4 block-region-sidebar-second">
  <div class="block-inner clearfix">
                <div class="block-content content no-title">
      <p><a href="http://appinventor.mit.edu/teach"><img src="../sites/explore.appinventor.mit.edu/files/resources_for_educators_button.png" alt="Resources For Educators" /></a></p>
<p>New! <a href="http://appinventor.mit.edu/teach/curriculum.html">MIT App Inventor Curriculum Now Available</a></p>
<p>
</p><hr />    </div>
  </div>
</div>
<section id="block-block-6" class="block block-block block-odd block-count-5 block-region-sidebar-second">
  <div class="block-inner clearfix">
              <h2 class="block-title">Phones &amp; Tablets Database</h2>
            <div class="block-content content">
      <p>Learn from and contribute to the <a href="http://bit.ly/AppInvDevices">database of devices known to work with App Inventor</a>.</p>
    </div>
  </div>
</section>
  </div>
    
  </div></div>

      <footer role="contentinfo">
              <div class="region region-footer">
    <div id="block-block-3" class="block block-block block-odd block-count-6 block-region-footer">
  <div class="block-inner clearfix">
                <div class="block-content content no-title">
      <p style="text-align: center;"><a rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/"><img alt="Creative Commons License" src="http://i.creativecommons.org/l/by-sa/3.0/88x31.png" /></a> <br />
This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/">Creative Commons Attribution-ShareAlike 3.0 Unported License</a></p>
<p style="text-align: center;">© 2012 <a href="http://web.mit.edu/">Massachusetts Institute of Technology</a></p>
<p style="text-align: center;"><a href="contact.html">Contact Us</a></p>
    </div>
  </div>
</div>
  </div>
    </footer>
  
</div>

  </body>

<!-- Mirrored from explore.appinventor.mit.edu/node/157 by HTTrack Website Copier/3.x [XR&CO'2010], Sat, 10 Nov 2012 03:44:17 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8"><!-- /Added by HTTrack -->
</html>
